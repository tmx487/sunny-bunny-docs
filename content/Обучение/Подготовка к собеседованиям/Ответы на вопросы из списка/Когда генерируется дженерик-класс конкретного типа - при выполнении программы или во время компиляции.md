---
уровень: "[[middle]]"
секция: типы, структуры и коллекции данных
пройдено: 
теги: 
дата: 02-05-2024
время: 20:29
---
**В C#, дженерик-класс конкретного типа генерируется во время выполнения (runtime), а не во время компиляции (compile-time).**

### Подробное объяснение

**Во время компиляции**
Во время компиляции компилятор C# создает IL-код (Intermediate Language), который включает в себя шаблонный код для дженерик-классов и методов. Этот код не содержит конкретных типов, которые будут использоваться в дженериках. Вместо этого он сохраняет информацию о том, что это дженерик, и какие типовые параметры он принимает.

**Во время выполнения**
Когда ваше приложение запускается, CLR (Common Language Runtime) отвечает за генерацию кода для конкретных типов дженерик-классов и методов на основе информации, предоставленной в IL-коде. Этот процесс называется JIT (Just-In-Time) компиляцией. Когда вы создаете экземпляр дженерик-класса с определенным типом, CLR генерирует и кэширует специализированный код для этого конкретного типа.

```c#
public class GenericClass<T>
{
    public void PrintType()
    {
        Console.WriteLine(typeof(T));
    }
}

var intInstance = new GenericClass<int>();
var stringInstance = new GenericClass<string>();

intInstance.PrintType();   // Output: System.Int32
stringInstance.PrintType(); // Output: System.String

// Во время выполнения CLR сгенерирует конкретные реализации
// GenericClass<int> и GenericClass<string>, и методы для этих конкретных
// типов будут созданы и кэшированы.
```

> Универсальные шаблоны представляют концепцию параметров типа в .NET. Универсальные шаблоны позволяют создавать классы и методы, откладывающие спецификацию одного или нескольких параметров типа, пока не будет  использоваться класс или метод в коде. Как пример, ниже показан класс с параметром T универсального типа. Этот класс может использоваться в другом клиентском коде, не требуя ресурсов и не создавая рисков, связанных с операциями приведения и упаковки-преобразования в среде выполнения.
> [https://learn.microsoft.com/ru-ru/dotnet/csharp/fundamentals/types/generics]


==Параметры универсального типа заменяются аргументами типа во время компиляции==