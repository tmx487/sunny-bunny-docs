---
уровень: "[[middle]]"
секция: базы_данных
пройдено: 
теги: 
дата: 02-05-2024
время: 20:43
---
Нормальные формы в реляционных базах данных — это принципы и правила, предназначенные для проектирования схем баз данных, которые помогают устранить избыточность данных и минимизировать проблемы аномалий при выполнении операций вставки, обновления и удаления. Эти принципы помогают обеспечить целостность данных и улучшить организацию таблиц.

### Нормальные формы

1. **Первая нормальная форма (1NF)**

   **Определение**:
   Таблица находится в первой нормальной форме, если:
   - Все атрибуты (колонки) содержат только атомарные (неделимые) значения.
   - Каждое значение в колонке является скалярным и не содержит множественных значений.

   **Пример**:
   Несоответствующая 1NF таблица:
   ```
   StudentID | StudentName | Courses
   ----------|-------------|-------------------
   1         | Alice       | Math, Physics
   2         | Bob         | Chemistry, Biology
   ```
   Таблица в 1NF:
   ```
   StudentID | StudentName | Course
   ----------|-------------|---------
   1         | Alice       | Math
   1         | Alice       | Physics
   2         | Bob         | Chemistry
   2         | Bob         | Biology
   ```

2. **Вторая нормальная форма (2NF)**

   **Определение**:
   Таблица находится во второй нормальной форме, если:
   - Она находится в 1NF.
   - Все неключевые атрибуты полностью функционально зависят от всего составного ключа (если он есть).

   **Пример**:
   Таблица в 2NF:
   ```
   StudentID | CourseID | StudentName | CourseName
   ----------|----------|-------------|-----------
   1         | 101      | Alice       | Math
   1         | 102      | Alice       | Physics
   2         | 103      | Bob         | Chemistry
   2         | 104      | Bob         | Biology
   ```
   Таблица нарушает 2NF, так как `StudentName` зависит только от `StudentID`, а не от всего составного ключа (`StudentID`, `CourseID`). 

   Можно разделить таблицу на:
   - Таблицу студентов:
     ```
     StudentID | StudentName
     ----------|-------------
     1         | Alice
     2         | Bob
     ```
   - Таблицу курсов:
     ```
     CourseID | CourseName
     ---------|-----------
     101      | Math
     102      | Physics
     103      | Chemistry
     104      | Biology
     ```
   - Таблицу связи между студентами и курсами:
     ```
     StudentID | CourseID
     ----------|---------
     1         | 101
     1         | 102
     2         | 103
     2         | 104
     ```

3. **Третья нормальная форма (3NF)**

   **Определение**:
   Таблица находится в третьей нормальной форме, если:
   - Она находится в 2NF.
   - Все неключевые атрибуты не зависят транзитивно от ключа (то есть не зависят от других неключевых атрибутов).

   **Пример**:
   Таблица нарушает 3NF:
   ```
   EmployeeID | EmployeeName | DepartmentID | DepartmentName
   -----------|--------------|--------------|---------------
   1          | John         | 10           | Sales
   2          | Jane         | 20           | Marketing
   ```
   `DepartmentName` зависит от `DepartmentID`, а не от `EmployeeID`. 

   Можно разделить таблицу на:
   - Таблицу сотрудников:
     ```
     EmployeeID | EmployeeName | DepartmentID
     -----------|--------------|--------------
     1          | John         | 10
     2          | Jane         | 20
     ```
   - Таблицу департаментов:
     ```
     DepartmentID | DepartmentName
     -------------|---------------
     10           | Sales
     20           | Marketing
     ```

4. **Бойс-Коддовая нормальная форма (BCNF)**

   **Определение**:
   Таблица находится в BCNF, если:
   - Она находится в 3NF.
   - Для любой функциональной зависимости `X -> Y`, где `X` — это суперключ.

   **Пример**:
   Таблица нарушает BCNF:
   ```
   CourseID | InstructorID | InstructorName
   ---------|--------------|---------------
   101      | 1            | Dr. Smith
   101      | 2            | Dr. Brown
   ```
   Здесь `InstructorID` определяет `InstructorName`, и `CourseID` не является суперключом. 

   Можно разделить таблицу на:
   - Таблицу курсов:
     ```
     CourseID | InstructorID
     ---------|--------------
     101      | 1
     101      | 2
     ```
   - Таблицу инструкторов:
     ```
     InstructorID | InstructorName
     -------------|---------------
     1            | Dr. Smith
     2            | Dr. Brown
     ```

5. **Четвертая нормальная форма (4NF)**

   **Определение**:
   Таблица находится в четвертой нормальной форме, если:
   - Она находится в BCNF.
   - Не содержит многозначных зависимостей.

   **Пример**:
   Таблица нарушает 4NF:
   ```
   StudentID | CourseID | AwardID
   ----------|----------|--------
   1         | 101      | A
   1         | 102      | B
   ```
   Здесь `StudentID` зависит от `CourseID` и `AwardID` независимо.

   Можно разделить таблицу на:
   - Таблицу учеников и курсов:
     ```
     StudentID | CourseID
     ----------|---------
     1         | 101
     1         | 102
     ```
   - Таблицу учеников и наград:
     ```
     StudentID | AwardID
     ----------|--------
     1         | A
     1         | B
     ```

6. **Пятая нормальная форма (5NF)**

   **Определение**:
   Таблица находится в пятой нормальной форме, если:
   - Она находится в 4NF.
   - Все соединения могут быть восстановлены только с использованием информации, уже присутствующей в таблице.

   **Пример**:
   Таблица нарушает 5NF:
   ```
   EmployeeID | ProjectID | TaskID
   ---------- | ----------| -------
   1          | 101       | 201
   1          | 102       | 202
   ```
   Можно разделить таблицу на:
   - Таблицу сотрудников и проектов:
     ```
     EmployeeID | ProjectID
     ---------- | ----------
     1          | 101
     1          | 102
     ```
   - Таблицу проектов и задач:
     ```
     ProjectID | TaskID
     ----------|-------
     101       | 201
     102       | 202
     ```

### Заключение

Нормальные формы помогают проектировать схемы баз данных, которые минимизируют избыточность данных и предотвращают аномалии при обновлении. Переход от одной нормальной формы к другой помогает в обеспечении лучшего структурирования данных и поддержания целостности данных.