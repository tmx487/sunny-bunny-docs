---
уровень: "[[junior]]"
секция: платформа .NET
пройдено: 
теги: 
дата: 02-05-2024
время: 19:43
---
Сборщик мусора (англ. Garbage Collector) - программа (часть [[Что такое CLR|CLR]]), осуществляющая высвобождение памяти на куче. Высвобождение происходит, когда в куче не остается больше свободного места для создания новых объектов или ОС сигнализирует об отсутствии свободного места в памяти. Сам процесс очистки происходит тогда, приложение наименее нагружено.

##### Почему GC начинает удалить из кучи только в таких исключительных случаях (см. абзац выше)?
Операция очистки памяти весьма ресурсоемкая, к тому же на время очистки приходится останавливать все потоки работающего приложения, т.к. на момент работы приложения все его объекты должны находится в неизменном состоянии

##### Как GC знает, какие объекты должны быть удалены?
GC удалит из кучи объекты, на которые отсутствует ссылка в стеке

##### Что конкретно делает GC во время очистки памяти?
GC действует по принципу "помечай и собирай". GC собирает не используемые объекты и помещает их в специальном месте в памяти, делая размещение объектов более компактным. 

##### Что происходит с объектами, которые пережили очистку GC?
Они приписываются к генерации_1, т.к. считаются важными и поэтому будут существовать в памяти еще какое-то время. Все объекты в памяти, которые пережили 2 и более очисток относятся к генерации_2.

##### Для чего объекты в памяти относятся к определенным генерациям?
Т.к. операция очистки является ресурсоемкой, то для оптимизации работы GC в первый его проход для высвобождения проверяются **только** объекты генерации_0. Если в рамках данной работы был освобожден достаточный объем памяти, то на этом работа GC прекращается. В противном случае процесс поиска объектов для удаления осуществляется сначала среди объектов генерации_1, а затем, при необходимости, среди объектов генерации_2.

##### Можно ли программно вызвать очистку памяти GC?
Да, нужно использовать метод `static System.GC.Collect()`. Данный метод используется крайне редко. Примеры программного вызова GC:
1) перед выполнением кода, работа которого не должна быть прервана GC
2) после создания большого количества объектов