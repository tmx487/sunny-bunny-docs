---
уровень: "[[middle]]"
секция: общее
пройдено: 
теги: 
дата: 02-05-2024
время: 20:18
---
Чистая функция — это функция, которая обладает двумя основными свойствами:

1. **Отсутствие побочных эффектов**: Чистая функция не изменяет состояние внешних данных или объектов. Она не имеет побочных эффектов, таких как изменение глобальных переменных, работа с файлами, выполнение ввода-вывода, изменение состояния объекта или базы данных.

2. **Функциональная зависимость только от входных данных**: Чистая функция возвращает результат, который полностью зависит только от ее входных параметров. Это означает, что для одних и тех же входных данных функция всегда возвращает один и тот же результат.

### Преимущества чистых функций

1. **Простота тестирования**:
   - Чистые функции легко тестировать, так как их поведение полностью определено входными параметрами. Нет необходимости моки, стабы или проверки состояния внешнего мира. Это упрощает написание юнит-тестов.

2. **Предсказуемость и повторяемость**:
   - Поскольку чистая функция всегда возвращает один и тот же результат для одинаковых входных данных, она обеспечивает предсказуемость и повторяемость. Это облегчает отладку и понимание кода.

3. **Отсутствие побочных эффектов**:
   - Поскольку чистая функция не изменяет внешнее состояние, ее использование делает код более безопасным и надежным. Можно быть уверенным, что вызов функции не повлияет на состояние программы или систему в целом.

4. **Кэширование и мемоизация**:
   - Чистые функции легко кэшировать и использовать мемоизацию, так как результат зависит только от входных параметров. Это может улучшить производительность за счет сохранения результатов вычислений и повторного использования их при необходимости.

5. **Параллелизм и многопоточность**:
   - Поскольку чистые функции не зависят от состояния, их можно безопасно выполнять в многопоточной среде без необходимости управления состоянием или синхронизации. Это упрощает параллельное программирование.

6. **Композиция функций**:
   - Чистые функции легко составлять и комбинировать, что облегчает создание сложных операций из простых. Это упрощает рефакторинг и расширение кода.

7. **Документирование и понимание кода**:
   - Код, использующий чистые функции, легче читать и понимать, так как функции выполняют конкретные задачи без побочных эффектов и изменяют только входные данные, возвращая результат. Это способствует лучшему документированию и более чистой архитектуре.

### Пример чистой функции

```csharp
public int Add(int a, int b)
{
    return a + b;
}
```

- **Чистая функция**: `Add` принимает два числа и возвращает их сумму. Она не изменяет состояние программы и всегда возвращает одно и то же значение для одного и того же набора входных данных.

### Пример не чистой функции

```csharp
public int IncrementGlobalCounter()
{
    globalCounter++;
    return globalCounter;
}
```

- **Не чистая функция**: `IncrementGlobalCounter` изменяет состояние глобальной переменной `globalCounter`. Она имеет побочные эффекты и ее результат зависит от текущего состояния этой переменной, а не только от входных данных.

### Заключение

Чистые функции являются важным концептом в функциональном программировании и могут значительно упростить разработку, тестирование и поддержку программного обеспечения. Они помогают создавать код, который более надежен, предсказуем и легко поддерживаем.