---
уровень: "[[middle]]"
секция: типы, структуры и коллекции данных
пройдено: 
теги: 
дата: 02-05-2024
время: 20:35
---
Массивы (`T[]`) и списки (`List<T>`) в C# имеют несколько ключевых различий, касающихся их поведения, функциональности и использования. Вот основные отличия:

### 1. Размер

- **Массив**: Размер массива фиксирован после его создания. Это означает, что вы не можете изменить количество элементов в массиве после его инициализации.

```csharp
int[] array = new int[5]; // Массив на 5 элементов
array[0] = 1;
array[1] = 2;
// Изменить размер массива нельзя
```

- **List\<T>**: Размер списка динамический, то есть вы можете добавлять или удалять элементы по мере необходимости.

```csharp
List<int> list = new List<int>(); // Пустой список
list.Add(1);
list.Add(2);
// Размер списка можно изменять
list.Remove(1);
```

### 2. Производительность

- **Массив**: Поскольку массивы имеют фиксированный размер, они могут быть более эффективными с точки зрения памяти и скорости доступа к элементам. Нет накладных расходов на управление изменением размера.

- **List\<T>**: Списки обеспечивают гибкость за счет динамического изменения размера, но это требует дополнительных накладных расходов. Внутренний массив списка может увеличиваться в размере, что требует выделения новой памяти и копирования элементов.

### 3. Функциональность

- **Массив**: Массивы предоставляют ограниченный набор функциональности. Вам нужно использовать циклы и дополнительные методы для выполнения операций, таких как добавление или удаление элементов.

- **List\<T>**: Списки предлагают богатый набор методов и свойств для управления коллекцией: добавление, удаление, поиск, сортировка и т.д.

```csharp
List<int> list = new List<int>();
list.Add(1); // Добавление элемента
list.Remove(1); // Удаление элемента
list.Contains(1); // Проверка наличия элемента
list.Sort(); // Сортировка элементов
```

### 4. Инициализация

- **Массив**: Массивы можно инициализировать с помощью фиксированного размера или с использованием литералов массива.

```csharp
int[] array = new int[5]; // Массив фиксированного размера
int[] array2 = { 1, 2, 3, 4, 5 }; // Инициализация литералом массива
```

- **List\<T>**: Списки можно инициализировать пустыми или передать начальную коллекцию элементов.

```csharp
List<int> list = new List<int>(); // Пустой список
List<int> list2 = new List<int> { 1, 2, 3, 4, 5 }; // Инициализация с элементами
```

### 5. Индексация

- **Массив**: Элементы массива можно получить с помощью индексов, начиная с 0.

```csharp
int[] array = { 1, 2, 3, 4, 5 };
int element = array[0]; // Первый элемент массива
```

- **List\<T>**: Списки также поддерживают индексацию.

```csharp
List<int> list = new List<int> { 1, 2, 3, 4, 5 };
int element = list[0]; // Первый элемент списка
```

### 6. Совместимость

- **Массив**: Массивы предоставляют базовую функциональность и могут быть использованы в методах и API, ожидающих массивы. Они могут быть преобразованы к типу `Array`.

```csharp
Array array = new int[] { 1, 2, 3 };
```

- **List\<T>**: Списки являются частью коллекций в .NET и реализуют интерфейсы, такие как `IList<T>`, `ICollection<T>`, `IEnumerable<T>`. Они часто используются в более сложных сценариях, требующих гибкости и функциональности.

```csharp
IList<int> list = new List<int> { 1, 2, 3 };
```

### Пример использования

```csharp
// Массив
int[] array = { 1, 2, 3, 4, 5 };
foreach (var item in array)
{
    Console.WriteLine(item);
}

// Список
List<int> list = new List<int> { 1, 2, 3, 4, 5 };
list.Add(6);
list.Remove(1);
foreach (var item in list)
{
    Console.WriteLine(item);
}
```

### Заключение

Выбор между массивом и списком зависит от конкретных требований вашего приложения. Если вам нужен фиксированный размер и высокая производительность, массив может быть лучшим выбором. Если вам нужна гибкость и дополнительные возможности управления коллекцией, лучше использовать список `List<T>`.