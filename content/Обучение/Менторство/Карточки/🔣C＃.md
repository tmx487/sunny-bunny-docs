## üìî–°—Å—ã–ª–æ—á–Ω—ã–µ –∏ –∑–Ω–∞—á–∏–º—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

### üìë–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É —Å—Å—ã–ª–æ—á–Ω—ã–º–∏ –∏ –∑–Ω–∞—á–∏–º—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö?

|                                | –∑–Ω–∞—á–∏–º—ã–π                                                                           | —Å—Å—ã–ª–æ—á–Ω—ã–π                                                                              |
| ------------------------------ | ---------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------- |
| –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–∏–ø–∞                | —Ö—Ä–∞–Ω–∏—Ç –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Å–∞–º–æ –∑–Ω–∞—á–µ–Ω–∏–µ                                               | —Å—Å—ã–ª–∫—É –Ω–∞ –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏, –≥–¥–µ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç                                     |
| –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è                    | `System.ValueType`                                                                 | –ø—Ä—è–º–æ –∏–ª–∏ –∫–æ—Å–≤–µ–Ω–Ω–æ –æ—Ç `System.Object`                                                  |
| –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `boxing/unboxing` | –¥–∞                                                                                 | –Ω–µ—Ç, —Ç.–∫. —É–∂–µ —Å—Å—ã–ª–æ—á–Ω—ã–π —Ç–∏–ø (–ø–æ —Å—É—Ç–∏, —Å—Å—ã–ª–æ—á–Ω—ã–π —Ç–∏–ø –≤—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è  –≤ `boxed` —Ñ–æ—Ä–º–µ) |
| —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –≤                  | **–≤ —Å—Ç–µ–∫–µ**, –∫—Ä–æ–º–µ —Å–ª—É—á–∞–µ–≤ –∫–æ–≥–¥–∞ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é `class` –∏–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ | **–≤—Å–µ–≥–¥–∞ –≤ –∫—É—á–µ**                                                                      |
 [[–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å Equals –∏ GetHashCode]]
### üìë–ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –∫–ª–∞—Å—Å –æ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã?

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞                                                                               | Struct                                                                            | Class                  |
| -------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------- | ---------------------- |
| –¢–∏–ø –æ–±—ä–µ–∫—Ç–∞                                                                                  | –∑–Ω–∞—á–∏–º—ã–π                                                                          | —Å—Å—ã–ª–æ—á–Ω—ã–π              |
| –ù–∞–ª–∏—á–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤                                                          | —è–≤–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–µ–ª—å–∑—è,<br>–Ω–æ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º –æ–Ω —É–∂–µ –µ—Å—Ç—å, –ø–æ—ç—Ç–æ–º—É –µ–≥–æ –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å | –µ—Å—Ç—å                   |
| –ú–æ–∂–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—è/—Å–≤–æ–π—Å—Ç–≤–∞ –Ω–∞–ø—Ä—è–º—É—é<br>(–Ω–∞–ø—Ä., *public int Numb {get; set; } = 1*) | **–Ω–µ—Ç**                                                                           | –¥–∞                     |
| –£–º–µ–µ—Ç –≤ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ                                                                         | **–Ω–µ—Ç**                                                                           | –¥–∞                     |
| –ú–æ–∂–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å                                                                | –¥–∞                                                                                | –¥–∞                     |
| –ï—Å—Ç—å —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä                                                                             | **–Ω–µ—Ç**                                                                           | –¥–∞                     |
| –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Equals()                                                                        | —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è                                                             | —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è —Å—Å—ã–ª–∫–∏    |
| –ü–µ—Ä–µ–¥–∞—á–∞ –≤ –º–µ—Ç–æ–¥                                                                             | –∫–æ–ø–∏—è –∑–Ω–∞—á–µ–Ω–∏—è (–µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ –≤ –º–µ—Ç–æ–¥–µ –≤—Ö–æ–¥–Ω–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ —É–∫–∞–∑–∞–Ω –∫–∞–∫ `ref/in`)     | –∫–æ–ø–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç |
| –Ø–≤–ª—è–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–º (**immutable**)                                                        | **–¥–∞**, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç `mutable` –ø–æ–ª–µ–π                                           | –Ω–µ—Ç                    |

### üìë–ö–∞–∫ –¥–æ–ª–≥–æ –∂–∏–≤—É—Ç —Å—Å—ã–ª–æ—á–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö?

–î–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ —Å—Å—ã–ª–∫–∞. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–±—ä–µ–∫—Ç –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –∫–æ–¥, –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π —Å–±–æ—Ä–∫–µ –º—É—Å–æ—Ä–∞ (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, GC –≤—ã–±–∏—Ä–∞–µ—Ç —á—Ç–æ –∏ –∫–æ–≥–¥–∞ —É–¥–∞–ª–∏—Ç—å)

### üìë–ö–∞–∫ –¥–æ–ª–≥–æ –∂–∏–≤—É—Ç –∑–Ω–∞—á–∏–º—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö?

–ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, –≤ –∫–∞–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ –ø–∞–º—è—Ç–∏ –æ–Ω–∏ —Ä–∞–∑–º–µ—â–µ–Ω—ã.
	- –µ—Å–ª–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä –∑–Ω–∞—á–∏–º–æ–≥–æ —Ç–∏–ø–∞ –ª–µ–∂–∏—Ç –≤ —Å—Ç–µ–∫–µ, —Ç–æ –æ–Ω —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –º–µ—Ç–æ–¥–∞
	- –µ—Å–ª–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä –∑–Ω–∞—á–∏–º–æ–≥–æ —Ç–∏–ø–∞ —è–≤–ª—è–µ—Ç—Å—è –≤–ª–æ–∂–µ–Ω–Ω—ã–º –≤ –¥—Ä—É–≥–æ–π —Ç–∏–ø, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–ª–∞—Å—Å  –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —Ç–æ –æ–Ω –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å, –∫–æ–≥–¥–∞ –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ 

### üìë–í—Å–µ–≥–¥–∞ –ª–∏ –∑–Ω–∞—á–∏–º—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è –≤ —Å—Ç–µ–∫–µ?

–ù–µ—Ç, –∑–Ω–∞—á–∏–º—ã–π —Ç–∏–ø —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫—É—á–µ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª—É—á–∞—è—Ö:
	- –µ—Å–ª–∏ –æ–Ω –ø—Ä–æ—à–µ–ª —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏—é `boxing`
	- –∫–æ–≥–¥–∞ –∑–Ω–∞—á–∏–º—ã–π —Ç–∏–ø —è–≤–ª—è–µ—Ç—Å—è —á–ª–µ–Ω–æ–º —Å—Å—ã–ª–æ—á–Ω–æ–≥–æ —Ç–∏–ø–∞

## üìî–ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

### üìë–ß—Ç–æ —Ç–∞–∫–æ–µ CLR –∏ –∫–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç?

**C**ommon **L**anguage **R**untime - –æ–±—â–µ—è–∑—ã–∫–æ–≤–∞—è —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è - —Å—Ä–µ–¥–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞. –ü–æ —Å—É—Ç–∏, —ç—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ –¥–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ `CIL`-–∫–æ–¥–∞ –≤ –º–∞—à–∏–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã. –§—É–Ω–∫—Ü–∏–∏:
- —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é
- –∫–æ–º–ø–∏–ª—è—Ü–∏—è `CIL` –≤ –º–∞—à–∏–Ω–Ω—ã–π –∫–æ–¥ –ø—Ä–∏ –ø–æ–º–æ—â–∏ [[JIT]]
- –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- –∑–∞–≥—Ä—É–∑–∫–∞ —Å–±–æ—Ä–æ–∫
- –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–∏–ø–∞–º –∏ –º–µ—Ç–æ–¥–∞–º)
- —Ç–∏–ø–∏–∑–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Ç–∏–ø–∞ `int` –Ω–µ –±—ã–ª–æ –ø—Ä–∏—Å–≤–æ–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞ `string`)

### üìë–ß—Ç–æ —Ç–∞–∫–æ–µ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π –∫–æ–¥?

‚Äî –∫–æ–¥, –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω—É–∂–Ω–∞ `CLR`. –¢–∞–∫–æ–π –∫–æ–¥ –ø–æ–¥–ø–∞–¥–∞–µ—Ç –ø–æ–¥ –¥–µ–π—Å—Ç–≤–∏–µ `GC`, –∞ —Ç–∞–∫–∂–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –Ω–µ –Ω—É–∂–Ω–æ –∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏

—á–∏—Ç–∞–π —Ç–∞–∫–∂–µ [[–û–±—É—á–µ–Ω–∏–µ/–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ/–¢–µ–æ—Ä–∏—è/CÔºÉ/–ù–µ—É–ø—Ä–∞–≤–ª—è–µ–º—ã–π –∫–æ–¥|–Ω–µ—É–ø—Ä–∞–≤–ª—è–µ–º—ã–π –∫–æ–¥]]
### üìë–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É —Ä–µ–ª–∏–∑–Ω–æ–π –∏ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π —Å–±–æ—Ä–∫–æ–π?

–û—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –≤ **–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞.** –î–∞–Ω–Ω—ã–µ –≤–∏–¥—ã —Å–±–æ—Ä–æ–∫ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è `MS Visual Studio` –∏–∑ –∫–æ—Ä–æ–±–∫–∏.

|                      | Debug                                                        | Release                                                                                                                                                             |
| -------------------- | ------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞     | **–Ω–µ—Ç**, —á—Ç–æ–±—ã –∫–æ–¥ –º–æ–∂–Ω–æ –±—ã–ª–æ –ª–µ–≥–∫–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å               | –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–Ω–∞–ø—Ä., —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞, [[–û–±—É—á–µ–Ω–∏–µ/–ú–µ–Ω—Ç–æ—Ä—Å—Ç–≤–æ/OLD –ö–∞—Ä—Ç–æ—á–∫–∏/–ì–ª–æ—Å—Å–∞—Ä–∏–π#^8aa548\|–∏–Ω–ª–∞–π–Ω–∏–Ω–≥ –º–µ—Ç–æ–¥–æ–≤]], –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ü–∏–∫–ª–æ–≤ –∏ –≤–µ—Ç–≤–ª–µ–Ω–∏–π) |
| –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–∞ –µ—Å—Ç—å | –¥–∞ (–≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è `.pdb` —Ñ–∞–π–ª—ã, –ø–æ—ç—Ç–æ–º—É –∫–æ–¥ –º–æ–∂–Ω–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å) | **–Ω–µ—Ç**                                                                                                                                                             |
| —Ç–æ—á–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∞ –µ—Å—Ç—å  | –¥–∞                                                           | **–Ω–µ—Ç**                                                                                                                                                             |
| –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å   | –Ω–µ–≤—ã—Å–æ–∫–∞—è, –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –º–Ω–æ–≥–æ —Å —Å–æ–±–æ–π —Ç–∞—Å–∫–∞—Ç—å                  | –≤—ã—Å–æ–∫–∞—è, —Ç–∞–∫ –Ω–µ—Ç –ª–∏—à–Ω–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏                                                                                                                                  |
| –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å   | —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞, –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤        | –ø—Ä–æ–¥–∞–∫—à –∏ –∫–æ–≥–¥–∞ –≤–∞–∂–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å                                                                                                                            |
>–°—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –∫–æ–¥ –≤ `Debug` –∏ –≤ `Release` —Å–±–æ—Ä–∫–∞—Ö –º–æ–∂–µ—Ç –≤–µ—Å—Ç–∏ —Å–µ–±—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É –∏–∑-–∑–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏. –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç —É–∂–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –æ—à–∏–±–∫–∏, —Ç–æ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å `.pdb` —Ñ–∞–π–ª—ã –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [[–û–±—É—á–µ–Ω–∏–µ/–ú–µ–Ω—Ç–æ—Ä—Å—Ç–≤–æ/OLD –ö–∞—Ä—Ç–æ—á–∫–∏/–ì–ª–æ—Å—Å–∞—Ä–∏–π#^732eec|Symbol Server]] –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

%%
—Ä–∞–∑–Ω–∏—Ü–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—Å—Ç–æ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ ‚Äî –≤—Å–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–º–∏ —ç—Ç–∏ —Ç–∏–ø—ã –∏ —è–≤–ª—è—é—Ç—Å—è.  
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –¥–µ–±–∞–≥–µ –æ—Ç–∫–ª—é—á–µ–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω —Ñ–ª–∞–≥ DEBUG –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å–∏–º–≤–æ–ª—ã –æ—Ç–ª–∞–¥–∫–∏.  
–ù–æ –Ω–∏–∫—Ç–æ –Ω–µ –∑–∞–ø—Ä–µ—â–∞–µ—Ç –≤ —Å–≤–æ–π—Å—Ç–≤–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ç–∫–ª—é—á–∏—Ç—å —ç—Ç–∏ –æ–ø—Ü–∏–∏ –∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–ª—É—á–∏—Ç—Å—è —Ç–æ—Ç –∂–µ Release, –Ω–æ —Å –∏–º–µ–Ω–µ–º Debug.  
–ë–æ–ª–µ–µ —Ç–æ–≥–æ, –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å –∏–º–µ–Ω–µ–º "–ü–µ—Ç—è", –≤ –∫–æ—Ç–æ—Ä–æ–π —Ä–∞—Å–∫–∏–¥–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–∫ —É–≥–æ–¥–Ω–æ.  
  
–í —Ü–µ–ª–æ–º, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –Ω–∞–±–æ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞. –°—Ç—É–¥–∏—è –≤—Å–µ–≥–æ –ª–∏—à—å –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–≤–∞ –≥–æ—Ç–æ–≤—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞.
%%

## üìî–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∏ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞

### üìë–ö–∞–∫–∏–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –¥–æ—Å—Ç—É–ø–∞ –µ—Å—Ç—å?

–æ—Ç —Å–∞–º–æ–≥–æ "–æ—Ç–∫—Ä—ã—Ç–æ–≥–æ" –∫ —Å–∞–º–æ–º—É "–∑–∞–∫—Ä—ã—Ç–æ–º—É"

| –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä          | –î–æ—Å—Ç—É–ø –∫ —á–ª–µ–Ω—É —Ç–∏–ø–∞                                     |
| -------------------- | ------------------------------------------------------- |
| `public`             | –æ—Ç–æ–≤—Å—é–¥—É (–∏–∑ –ª—é–±–æ–≥–æ —Ñ–∞–π–ª–∞, –∫–ª–∞—Å—Å–∞, —Å–±–æ—Ä–∫–∏ –∏ –ø—Ä–æ—á.)      |
| `protected internal` | —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤ –∫–ª–∞—Å—Å–∞ –∏ –≤–Ω—É—Ç—Ä–∏ —Ç–æ–π –∂–µ —Å–±–æ—Ä–∫–∏ |
| `protected`          | —Ç–æ–ª—å–∫–æ –≤ —Å–∞–º–æ–º –∫–ª–∞—Å—Å–µ –∏ –≤–Ω—É—Ç—Ä–∏ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤              |
| `internal`           | —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∞ (—Å–±–æ—Ä–∫–∏)                          |
| `private protected`  | –≤–Ω—É—Ç—Ä–∏ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤ –∏–∑ —Ç–æ–π –∂–µ —Å–±–æ—Ä–∫–∏                     |
| `private`            | —Ç–æ–ª—å–∫–æ –≤ —Å–∞–º–æ–º –∫–ª–∞—Å—Å–µ                                   |
| `file`               | —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (–¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ C#11+)    |

### üìë–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É const –∏ readonly?

|                                    | const                                                                                                                             | readonly                                                                                                                                                                                                                                                             |
| ---------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è                      | —Å—Ç—Ä–æ–≥–æ —Å—Ä–∞–∑—É –ø—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏                                                                                                       | –ª–∏–±–æ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ —Ç–∏–ø–∞, –ª–∏–±–æ –ø—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏                                                                                                                                                                                                                        |
| –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ | –Ω–µ—Ç                                                                                                                               | –Ω–µ—Ç                                                                                                                                                                                                                                                                  |
| —Å —á–µ–º –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å           | **—Ç–æ–ª—å–∫–æ —Å–æ –∑–Ω–∞—á–∏–º—ã–º–∏ —Ç–∏–ø–∞–º–∏** (–∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º `struct`)                                                                          | —Å –ª—é–±—ã–º —Ç–∏–ø–æ–º, –≤–∫–ª—é—á–∞—è –∫–∞—Å—Ç–æ–º–Ω—ã–µ                                                                                                                                                                                                                                     |
| –º–æ–∂–µ—Ç –±—ã—Ç—å `static`                | —è–≤–Ω–æ –Ω–µ—Ç, –Ω–æ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º —Ç–∞–∫–æ–≤—ã–º —è–≤–ª—è–µ—Ç—Å—è                                                                                         | **–¥–∞**                                                                                                                                                                                                                                                               |
| –∫–æ–≥–¥–∞ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ –∫–æ–¥           | **–Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏**–∏ (—É—Å–ª–æ–≤–Ω–æ, –≤–º–µ—Å—Ç–æ –±—É–∫–≤ –≤ `CIL-–∫–æ–¥–µ` –±—É–¥–µ—Ç —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)                                               | –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è                                                                                                                                                                                                                                  |
| –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å                 | - –¥–ª—è **—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π**, –Ω–∞–ø—Ä., –Ω–∞–∑–≤–∞–Ω–∏—è –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏, –º–∞—Ç. –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã<br>- –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ **–∏–∑–≤–µ—Å—Ç–Ω–æ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏** | - –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ **–∏–∑–≤–µ—Å—Ç–Ω–æ —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ)<br>- –ø–æ–ª–µ —Ç–∏–ø–∞ **—Ö—Ä–∞–Ω–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—ä–µ–∫—Ç**, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ (–Ω–∞–ø—Ä., –≤ `class` –µ—Å—Ç—å –ø–æ–ª–µ –∏–ª–∏ —Å–≤–æ–π—Å—Ç–≤–æ `readonly List<string>`) |
–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ [[staitc vs const vs readonly|—á–∏—Ç–∞–π]]
### üìë–î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è sealed?

–ß—Ç–æ–±—ã –æ–±—ä—è–≤–∏—Ç—å —Ç–∏–ø (–Ω–∞–ø—Ä., `class` –∏–ª–∏ `record`), –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è. –ü–ª—é—Å, —É–∫–∞–∑–∞–Ω–∏–µ —Ç–∏–ø–∞ –∫–∞–∫ `sealed` —É–ª—É—á—à–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é, —Ç.–∫. `JIT-–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä` –º–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å –∏–Ω–ª–∞–π–Ω-–∫–æ–º–ø–∏–ª—è—Ü–∏—é –∏–ª–∏ [[–û–±—É—á–µ–Ω–∏–µ/–ú–µ–Ω—Ç–æ—Ä—Å—Ç–≤–æ/OLD –ö–∞—Ä—Ç–æ—á–∫–∏/–ì–ª–æ—Å—Å–∞—Ä–∏–π#^8aa548|–∏–Ω–ª–∞–π–Ω–∏–Ω–≥ –º–µ—Ç–æ–¥–æ–≤]] (`sealed` –∫–ª–∞—Å—Å—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ –∏–∑-–∑–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤—ã–∑–æ–≤–æ–≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤, —Ç–∞–∫–∂–µ [[–ü–æ—á–µ–º—É `sealed` –∫–ª–∞—Å—Å—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ|—á–∏—Ç–∞–π]])

### üìë–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É override –∏ new?
   
–í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤ –∫–ª–∞—Å—Å–µ-—Ä–æ–¥–∏—Ç–µ–ª–µ –∏ –∫–ª–∞—Å—Å–µ-–Ω–∞—Å–ª–µ–¥–Ω–∏–∫–µ –µ—Å—Ç—å –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ç–æ —É–∫–∞–∑–∞—Ç—å –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ –∏–∑ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ `override` –∏ `new`.
   
–û—Ç–¥–µ–ª—å–Ω–æ —Å—Ç–æ–∏—Ç —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ `override` —Å–ª—É–∂–∏—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ **–ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞**, –∞ `new` - —Ç–æ–ª—å–∫–æ –¥–ª—è **—Å–æ–∫—Ä—ã—Ç–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞** (—Å–º. –ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ, –∞ —Ç–∞–∫–∂–µ —Å–º. [[üõ†Ô∏è–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞#üìë–û–û–ü –ø—Ä–∏–Ω—Ü–∏–ø—ã|üìë–û–û–ü –ø—Ä–∏–Ω—Ü–∏–ø—ã]]) ^ead3bc

```csharp
  internal class Transport
  {
      public virtual void Move() => Console.WriteLine("Transport starts moving...");
      public virtual void Maintain() => Console.WriteLine("Repair transport...");
  }

  internal class Car : Transport
  {
      public override void Move() => Console.WriteLine("CAR starts moving...");
      public new void Maintain() => Console.WriteLine("Change a wheel in a car...");
  }

 Transport transport = new Car();
 transport.Move(); // CAR starts moving...
 transport.Maintain(); // Repair transport...

 Car car = new Car(); 
 car.Move(); // CAR starts moving...
 car.Maintain(); // Change a wheel in a car...
```

### üìë–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç ref, in, out –ø–∞—Ä–∞–º–µ—Ç—Ä—ã?

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ö–∞–∫ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä               | –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –≤–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ | –ü–∞—Ä–∞–º–µ—Ç—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–æ –ø–µ—Ä–µ–¥–∞—á–∏ –≤ –º–µ—Ç–æ–¥ | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è                                                                                                         |
| -------- | ------------------------------------- | ----------------------------------------------- | ----------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ |
| `ref`    | –ø–æ —Å—Å—ã–ª–∫–µ, **–º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å**           | –¥–∞                                              | –¥–∞                                                          |                                                                                                                    |
| `in`     | –ø–æ —Å—Å—ã–ª–∫–µ, **—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è**      | –Ω–µ—Ç                                             | –¥–∞                                                          | - –¥–ª—è –∫–ª–∞—Å—Å–∞ `in` –º–æ–∂–µ—Ç –≤–Ω—É—Ç—Ä–∏ –∏–∑–º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞, –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –ø–æ —Å—Å—ã–ª–∫–µ, –Ω–æ —Å–∞–º—É —Å—Å—ã–ª–∫—É –∏–∑–º–µ–Ω—è—Ç—å –Ω–µ —Å–º–æ–∂–µ—Ç |
| `out`    | –ø–æ —Å—Å—ã–ª–∫–µ, –Ω–æ **—Ç–æ–ª—å–∫–æ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞** | **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**, –∏–Ω–∞—á–µ –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞             | –º–æ–∂–µ—Ç –∏ –Ω–µ –±—ã—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞                            |                                                                                                                    |
>[!warning] –í–∞–∂–Ω–æ
>–ò —Å –∫–ª–∞—Å—Å–∞–º–∏, –∏ —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `ref, in, out` —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ

## üìî–û–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∏ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏

### üìë–ß—Ç–æ —Ç–∞–∫–æ–µ –∑–∞–º—ã–∫–∞–Ω–∏–µ (closure)?

–≠—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è *–∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–≤–Ω–µ—à–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç - —Ñ—É–Ω–∫—Ü–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–π –ª–µ–∂–∏—Ç –∫–æ–¥ –∑–∞–º—ã–∫–∞–Ω–∏—è)*, —Ç.–µ. –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö, –∏ *–º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –∫–æ–¥, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è, —É–∂–µ –∑–∞–≤–µ—Ä—à–∏–ª —Å–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ*. –û–±—ã—á–Ω–æ –∑–∞–º—ã–∫–∞–Ω–∏—è–º–∏ —è–≤–ª—è—é—Ç—Å—è **–∞–Ω–æ–Ω–∏–º–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏–ª–∏ –ª—è–º–±–¥–∞-–≤—ã—Ä–∞–∂–µ–Ω–∏—è**.

‚ùó–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –æ –∑–∞–º—ã–∫–∞–Ω–∏—è—Ö:
- –ó–∞—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∞ –Ω–µ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è
- –í —Ü–∏–∫–ª–∞—Ö –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–ø–∏–∏ –∑–∞—Ö–≤–∞—á–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–ª–∞ –ª–æ–≥–∏–∫–∞
- –í –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –∫–æ–¥–µ –Ω—É–∂–Ω–æ –±—ã—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã–º —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∑–∞—Ö–≤–∞—á–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- –ó–∞–º—ã–∫–∞–Ω–∏—è –º–æ–≥—É—Ç –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- –ó–∞—Ö–≤–∞—á–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω—ã

–ö–æ–≥–¥–∞ –ø–æ–ª–µ–∑–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–º—ã–∫–∞–Ω–∏—è:
- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏–∏
- –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–±—Ä–∏–∫ —Ñ—É–Ω–∫—Ü–∏–π —Å —Ä–∞–∑–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- –î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π, –∫–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ –≤–Ω–µ—à–Ω–∏–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º
- –î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### üìë–ß—Ç–æ —Ç–∞–∫–æ–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è (static fields), –∏ –∫–æ–≥–¥–∞ –æ–Ω–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è?

*–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è* - –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ:
- –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º —Ç–∏–ø–∞
- –æ–±–æ–∑–Ω–∞—á–∞—é—Ç—Å—è –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º `static`
- –æ–ø–∏—Å—ã–≤–∞—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–∏–ø–∞ –≤ —Ü–µ–ª–æ–º, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
- –Ω–µ –Ω—É–∂–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ä–∞–∑—É –∂–µ –ø—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ (*–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø—Ä–∏—Å–≤–æ–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: –¥–ª—è —Å—Å—ã–ª–æ—á–Ω—ã—Ö - `null`, –¥–ª—è –∑–Ω–∞—á–∏–º—ã—Ö - –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç–∏–ø–æ–º*)
<br/>

***–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è*** —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª–µ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –º–æ–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–ø–∞ –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –ø–∞–º—è—Ç—å. –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–ø–∞ –≤ –ø–∞–º—è—Ç—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–æ –≤—Ä–µ–º—è `JIT-–∫–æ–º–ø–∏–ª—è—Ü–∏–∏` –ª—é–±–æ–≥–æ –º–µ—Ç–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Ç–∏–ø, —Ç.–µ. –≤ —Å–ª—É—á–∞—è—Ö:
- –∫–æ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø–µ—Ä–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä —Ç–∏–ø–∞
- –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ —Ç–∏–ø–∞
- –∫–æ–≥–¥–∞ –∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–º—É –ø–æ–ª—é –æ–±—Ä–∞—â–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é
- –µ—Å–ª–∏ –≤ —Ç–∏–ø–µ –µ—Å—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Ç–∏–ø–∞

### üìë–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã?

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–∏–ø–∞ –≤ –∫–æ–¥–µ (–¥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Ç–∏–ø–∞ –∏–ª–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º —á–ª–µ–Ω–∞–º). –í —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–º –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã **—Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —á–ª–µ–Ω—ã** —Ç–∏–ø–∞. –¢–∞–∫–∂–µ –≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ–º–µ—â–∞—é—Ç –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–∏–ø–∞ –≤ –ø–∞–º—è—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ –ë–î)

## üìî–ù–µ—É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### üìë–ß—Ç–æ —Ç–∞–∫–æ–µ [[–û–±—É—á–µ–Ω–∏–µ/–ú–µ–Ω—Ç–æ—Ä—Å—Ç–≤–æ/OLD –ö–∞—Ä—Ç–æ—á–∫–∏/–ì–ª–æ—Å—Å–∞—Ä–∏–π#^a6e328|—Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä]]?

–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ —Ç–∏–ø–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É–∂–∏—Ç –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è ***—Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤*** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∞–π–ª–æ–≤, —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, —Å–æ–∫–µ—Ç–æ–≤, –º—å—é—Ç–µ–∫—Å–æ–≤ –∏ –ø—Ä–æ—á.). –ò–º–µ–µ—Ç —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:

```csharp
internal sealed class CustomType
{
	~CustomType() // –∫–∞–∫ –∏ –¥–ª—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ç–∏–ø–∞
	{
		// –∫–æ–¥ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
	}
}
```

<br/>–î–ª—è –≤—ã–∑–æ–≤–∞ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤ `CLR` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç *—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –≤—ã—Å–æ–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –ø–æ—Ç–æ–∫ (`finilizer thread`)*, –ø–æ—ç—Ç–æ–º—É —Å–∏—Ç—É–∞—Ü–∏—è –≤–∑–∞–∏–º–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Ç–æ–∫–æ–≤ –¥—Ä—É–≥ –¥—Ä—É–≥–æ–º –Ω–µ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç.

### üìë–ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ñ–∏–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤?

\[–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º, –µ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç–∏–ø `CustomFinalizableType`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–æ–¥ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä.]

- **—Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞:** —Ç.–∫. `CustomFinilizableType` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä, –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ —Ç–∏–ø–∞, —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –±—É–¥—É—â–∏–π –æ–±—ä–µ–∫—Ç –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ **–ª–∏—Å—Ç —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ (`finalization list`)**[^1]

- **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞**

- **—Å–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞ (1–π –ø—Ä–æ—Ö–æ–¥):** –∫–æ–≥–¥–∞ `GC` –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –µ—Å—Ç—å –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å, —Ç.–µ. –Ω–∞ –Ω–∏—Ö –±–æ–ª—å—à–µ –Ω–µ—Ç —Å—Å—ã–ª–æ–∫ (–Ω–∞–∑–æ–≤–µ–º –∏—Ö "–º—É—Å–æ—Ä–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã"), —Ç–æ –æ–Ω –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏–∏, –Ω–µ—Ç –ª–∏ —Ç–∞–º —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –Ω–∞ –º—É—Å–æ—Ä–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã. –ï—Å–ª–∏ —Ç–∞–∫–æ–π —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω, —Ç–æ –æ–Ω, —É–∫–∞–∑–∞—Ç–µ–ª—å, –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ **–æ—á–µ—Ä–µ–¥—å –Ω–∞ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—é (`freachable queue`)**[^2]

- `finalizer thread` –≤ —Ñ–æ–Ω–æ–≤–æ–º –ø–æ—Ç–æ–∫–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å –Ω–∞ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—é –∏ –ø–æ–æ—á–µ—Ä–µ–¥–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ–∏–Ω–∞–ª–∏–∑–∏–∞—Ç–æ—Ä –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞, —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏

- **—Å–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞ (2–π –ø—Ä–æ—Ö–æ–¥):** —Ç–µ–ø–µ—Ä—å `GC` –º–æ–∂–µ—Ç –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–∞–º—è—Ç—å –æ—Ç –æ–±—ä–µ–∫—Ç–æ–≤, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –±—ã–ª–∏ –≤—ã–∑–≤–∞–Ω—ã —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã (2–π –ø—Ä–æ—Ö–æ–¥ –¥–ª—è —Å–±–æ—Ä–∫–∏ –º—É—Å–æ—Ä–∞ –±—É–¥–µ—Ç –Ω–µ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ 1–≥–æ, –∞ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç `GC`)

- **–¥–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è (Compacting)** ***(—Ç–æ–ª—å–∫–æ –¥–ª—è –∫—É—á–∏ –ø–æ–∫–æ–ª–µ–Ω–∏—è 0 –∏ 1)***: –≤—ã–∂–∏–≤—à–∏–µ –æ–±—ä–µ–∫—Ç—ã –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –±–ª–∏–∂–µ –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏. –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤—Å–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —ç—Ç–∏ –æ–±—ä–µ–∫—Ç—ã. –≠—Ç–æ —É–ª—É—á—à–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏, —á—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø.

![[Pasted image 20250618190849.png]]

### üìë–í —á–µ–º –º–∏–Ω—É—Å —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç IDisposable?

- –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä, —Ç.–∫. —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –º—É—Å–æ—Ä–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ
- –Ω–µ–ª—å–∑—è –≤—ã–∑–≤–∞—Ç—å —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –≤—Ä—É—á–Ω—É—é, –ø–æ—ç—Ç–æ–º—É –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –∑–∞–Ω—è—Ç–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞
- —Ç.–∫. –æ–±—ä–µ–∫—Ç—ã, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –±—ã–ª–∏ –≤—ã–∑–≤–∞–Ω—ã —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã, —É–¥–∞–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –ø–æ—Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–æ—Ö–æ–¥–µ `GC`, –ø–æ–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ –æ–Ω–∏ –≤—Å–µ —Ä–∞–≤–Ω–æ –∑–∞–Ω–∏–º–∞—é—Ç –ø–∞–º—è—Ç—å
- –ø—Ä–æ—Å–µ–¥–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ç.–∫. –Ω—É–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–ª–∏—Å—Ç –∏ –æ—á–µ—Ä–µ–¥—å), –∞ —Ç–∞–∫–∂–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ `finalizer thread`
- –Ω–µ–ª—å–∑—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–∞ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤, —á—Ç–æ –º–æ–∂–µ—Ç –ø–æ–≤–ª–µ—á—å –∑–∞ —Å–æ–±–æ–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ –≤–∏–¥–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

### üìë–í —á–µ–º –ø–æ–ª—å–∑–∞ –æ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç IDisposable?

–û–Ω –≤—ã–∑–æ–≤–µ—Ç—Å—è –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –º—É—Å–æ—Ä–∞, —Ç.–∫. –µ–≥–æ –≤—ã–∑–æ–≤ –ª–µ–∂–∏—Ç –Ω–∞ `CLR`, –∞ –Ω–µ –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–µ

### üìë–í–æ —á—Ç–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è using?

–í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é `try...finally`. –í–Ω—É—Ç—Ä–∏ `finally` –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ `Dispose`. 

| –±—ã–ª–æ                                                                                                                                                                                          | —Å—Ç–∞–ª–æ                                                                                                                              |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------- |
| FileStream fs = new FileStream("Temp.dat", FileMode.Create);<br>try<br>{ <br>	fs.Write(bytesToWrite, 0, bytesToWrite.Length);<br>}<br>finally<br>{<br>	if (fs != null)<br>	fs.Dispose();<br>} | using (FileStream fs = new FileStream("Temp.dat", FileMode.Create)) <br>{<br>	fs.Write(bytesToWrite, 0, bytesToWrite.Length);<br>} |

>[!danger] –í–∞–∂–Ω–æ
>
>`using` –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ —Å —Ç–∏–ø–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª–∏–∑—É—é—Ç `IDisposable`


[^1]: –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–æ–π —É–ø—Ä–∞–≤–ª—è–µ—Ç `GC` –∏ –∫–æ—Ç–æ—Ä–∞—è –Ω—É–∂–Ω–∞ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –¥–ª—è –∫–∞–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞—Ç—å —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã, –ø—Ä–µ–∂–¥–µ —á–µ–º –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–∞–º—è—Ç—å

[^2]: –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–æ–π —É–ø—Ä–∞–≤–ª—è–µ—Ç `GC` –∏ –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã

## üìî–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å

### üìë–ë–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ç—ã

#### üìå–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–æ–º –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–º?

***–ü—Ä–æ—Ü–µ—Å—Å*** - –Ω–∞–±–æ—Ä —Ä–µ—Å—É—Ä—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. 

***–ü–æ—Ç–æ–∫*** (`thread`) - —Å–≤–æ–µ–≥–æ —Ä–æ–¥–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª–Ω—è–µ—Ç –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–î–ª—è –Ω–æ–≤–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å. –ï—Å–ª–∏ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∫–∏—Ö-–ª–∏–±–æ –æ–ø–µ—Ä–∞—Ü–∏–π, —Ç–æ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ

| –ü—Ä–æ—Ü–µ—Å—Å                                                                                                                                                                                                   | –ü–æ—Ç–æ–∫ (thread)                                                                                                                                                                                                                                       |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| - —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∞–¥—Ä–µ—Å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –≤ –ø–∞–º—è—Ç–∏<br>- –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã<br>- –∫–∞–∫ –º–∏–Ω–∏–º—É–º –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≥–ª–∞–≤–Ω—ã–π –ø–æ—Ç–æ–∫)<br>- –æ—Ç–¥–µ–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä —Ñ–∞–π–ª–æ–≤—ã—Ö –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ | - —Ä–∞–∑–¥–µ–ª—è—é—Ç –æ–±—â–µ–µ –∞–¥—Ä–µ—Å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏ —Ä–µ—Å—É—Ä—Å—ã –ø—Ä–æ—Ü–µ—Å—Å–∞<br>- –∏–º–µ—é—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å—Ç–µ–∫ –∏ —Ä–µ–≥–∏—Å—Ç—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞<br>- –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (—Ç–æ–ª—å–∫–æ –Ω–∞ –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö)<br>- —Ç—Ä–µ–±—É—é—Ç –º–µ–Ω—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ |
#### üìå–ß—Ç–æ —Ç–∞–∫–æ–µ [[–ü—É–ª –ø–æ—Ç–æ–∫–æ–≤ ¬∑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏|–ø—É–ª –ø–æ—Ç–æ–∫–æ–≤]]?

–ù–∞–±–æ—Ä –≥–æ—Ç–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–æ–≤, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏. –î–∞–ª–µ–µ —Ü–∏—Ç–∞—Ç–∞ –∏–∑ –†–∏—Ö—Ç–µ—Ä–∞: *"–î–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ CLR —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å–≤–æ–π –ø—É–ª, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤—Å–µ–º–∏ –¥–æ–º–µ–Ω–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –Ω–∞—Ö–æ–¥—è—â–∏–º–∏—Å—è –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ CLR. –ï—Å–ª–∏ –≤ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ CLR, –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –Ω–∏—Ö —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—É–ª"*

```txt
---
Claude:
---

–¶–∏—Ç–∞—Ç–∞ –≤—ã—à–µ –æ–±—ä—è—Å–Ω—è–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –º–µ–∂–¥—É –ø—É–ª–∞–º–∏ –ø–æ—Ç–æ–∫–æ–≤, —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ CLR (Common Language Runtime) –∏ –¥–æ–º–µ–Ω–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º —ç—Ç–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ:

1. –ü—É–ª –ø–æ—Ç–æ–∫–æ–≤ ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä –∑–∞—Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ (—á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —Ä–µ—Å—É—Ä—Å–æ–µ–º–∫–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π).
2. –≠–∫–∑–µ–º–ø–ª—è—Ä CLR ‚Äî —ç—Ç–æ —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è .NET –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä–∞—è —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–¥–∞, —Å–±–æ—Ä–∫–æ–π –º—É—Å–æ—Ä–∞, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ —Ç.–¥.
3. –î–æ–º–µ–Ω—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π ‚Äî —ç—Ç–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –∏–∑–æ–ª—è—Ü–∏—é –≤—ã–ø–æ–ª–Ω—è–µ–º–æ–≥–æ –∫–æ–¥–∞.

–¢–æ, —á—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–æ –≤ —Ü–∏—Ç–∞—Ç–µ, –æ–∑–Ω–∞—á–∞–µ—Ç:

- –ö–∞–∂–¥—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä CLR —Å–æ–∑–¥–∞–µ—Ç —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤.
- –≠—Ç–æ—Ç –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤ —Å–æ–≤–º–µ—Å—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å–µ–º–∏ –¥–æ–º–µ–Ω–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, —Ä–∞–±–æ—Ç–∞—é—â–∏–º–∏ –≤ —Ä–∞–º–∫–∞—Ö –¥–∞–Ω–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ CLR.
- –ï—Å–ª–∏ –≤ –æ–¥–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–ø—É—â–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ CLR (—á—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π .NET), —Ç–æ –∫–∞–∂–¥—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä CLR –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Å–≤–æ–π –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤.

–≠—Ç–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ—Ç–æ–∫–∞–º–∏ –≤ .NET –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—è –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –∏—Ö —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ CLR.
```

#### üìå–ß—Ç–æ —Ç–∞–∫–æ–µ [[–ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (SynchronizationContext)|–∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏]]?

–≠—Ç–æ **–æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–ª–æ–π** (–∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è), –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç **—Ç–µ–º, –≥–¥–µ –∏ –∫–∞–∫ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –ø–æ—Å–ª–µ `await`**. –í–∞–∂–µ–Ω –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `async/await`, —Ç.–∫. –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–ª–≥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç.

–û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç .NET:
- –í–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –Ω–∞ –Ω—É–∂–Ω—ã–π –ø–æ—Ç–æ–∫ –ø–æ—Å–ª–µ await
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ UI-–ø–æ—Ç–æ–∫–µ (–≤ WPF, WinForms, Blazor –∏ —Ç.–¥.)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.** –í –º–æ–º–µ–Ω—Ç –≤—ã–∑–æ–≤–∞ await, .NET:
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—É—â–∏–π SynchronizationContext (–µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å)
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è await –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –≤ —ç—Ç–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ.

–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (https://ru.stackoverflow.com/questions/1295270/%D0%97%D0%B0%D1%87%D0%B5%D0%BC-%D0%BD%D1%83%D0%B6%D0%B5%D0%BD-%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%BA%D1%81%D1%82-%D1%81%D0%B8%D0%BD%D1%85%D1%80%D0%BE%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8-%D0%BD%D0%B0-%D0%B1%D0%B5%D0%BA%D0%B5%D0%BD%D0%B4%D0%B5)
–°—Ç–∞—Ä—ã–π ASP.NET –∏–º–µ–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤, –æ—Å–Ω–æ–≤–Ω–æ–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö -¬†[`HttpContext.Current`](https://docs.microsoft.com/en-us/dotnet/api/system.web.httpcontext.current?view=netframework-4.8). –ö—Å—Ç–∞—Ç–∏, ASP.NET Core –¥–ª—è —Ç–µ—Ö –∂–µ —Ü–µ–ª–µ–π –∏–º–µ–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å¬†[`IHttpContextAccessor`](https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.ihttpcontextaccessor?view=aspnetcore-5.0), –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–Ω –Ω–µ –Ω–∞—Å—Ç–æ–ª—å–∫–æ —à–∏—Ä–æ–∫–æ: —Å–µ–π—á–∞—Å –≤–ø–æ–ª–Ω–µ –≤–æ–∑–º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–ª–æ–∂–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∏ —Ä–∞–∑—É –Ω–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–≤—à–∏—Å—å —ç—Ç–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º - –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ —Ä–∞–Ω—å—à–µ –ø—Ä—è–º–æ –∏–ª–∏ –∫–æ—Å–≤–µ–Ω–Ω–æ¬†`HttpContext.Current`¬†–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤—Å–µ–≥–¥–∞ –∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.

–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ¬†`HttpContext.Current`¬†–±—ã–ª –ø—Ä–æ—Å—Ç–æ ThreadStatic-–ø–æ–ª–µ–º, –Ω–æ –∫–æ–≥–¥–∞ –≤ ASP.NET —Å—Ç–∞–ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å - –æ–∫–∞–∑–∞–ª–æ—Å—å —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è ThreadStatic-–ø–æ–ª–µ–π –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π "—Ç–µ—Ä—è—é—Ç—Å—è". –ù–æ –µ—Å–ª–∏¬†`IHttpContextAccessor`¬†—Ä–µ—à–∞–µ—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ö–∞–Ω–∏–∑–º¬†[`AsyncLocal`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.asynclocal-1?view=net-5.0)¬†- —Ç–æ —Å–æ–∑–¥–∞—Ç–µ–ª–∏ ASP.NET —Ç–∞–∫ –ø–æ—Å—Ç—É–ø–∏—Ç—å –Ω–µ –º–æ–≥–ª–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ ASP.NET –¥—Ä–µ–≤–Ω–µ–µ —ç—Ç–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞. –ó–¥–µ—Å—å-—Ç–æ –∏–º –∏ –ø—Ä–∏—à–ª–∞ –≤ –≥–æ–ª–æ–≤—É –∏–¥–µ—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.

–ü–æ —Å—É—Ç–∏, –≥–ª–∞–≤–Ω—ã–π —Å–º—ã—Å–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è¬†`SynchronizationContext`¬†–≤ ASP.NET - —ç—Ç–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ¬†`HttpContext.Current`¬†–ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.

–ó–∞–æ–¥–Ω–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ä–µ—à–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–¥–∞—á–∏:

1. —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–π - –≤—Å–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω—ã—Ö –≥–æ–Ω–æ–∫ –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ —Ä–∞–∑–¥–µ–ª—è–µ–º—ã–º –æ–±—ä–µ–∫—Ç–∞–º - –≤ –Ω–æ–≤–æ–º ASP.NET Core —ç—Ç—É –∑–∞–¥–∞—á—É –≤–æ–∑–ª–æ–∂–∏–ª–∏ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ –∏ —á–∞—Å—Ç–∏—á–Ω–æ –Ω–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä await;
    
2. —É—á—ë—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, —á—Ç–æ–±—ã –∑–Ω–∞—Ç—å –∫–æ–≥–¥–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å - –≤ –Ω–æ–≤–æ–º ASP.NET Core –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–∞–¥–∞—á–∏ (Task –∏ ValueTask).
    

PS —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ -¬†[https://referencesource.microsoft.com/#system.web/AspNetSynchronizationContext.cs](https://referencesource.microsoft.com/#system.web/AspNetSynchronizationContext.cs)

#### üìå–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º?

|                       | üß†–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ                                                                                                                                                                                                                                                                                                     | üîÄ–ú–Ω–æ–≥–æ—Ç–æ–ø–æ—Ç–æ—á–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ                                                                                                                                 |
| --------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| –¥–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–æ        | —á—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞                                                                                                                                                                                                                                                      | —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ                                                                                                                    |
| –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ç–æ–∫–æ–≤    | –æ—Ç –æ–¥–Ω–æ–≥–æ –¥–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö (–Ω–æ–≤—ã–µ –ø–æ—Ç–æ–∫–∏ –æ–±—ã—á–Ω–æ –±–µ—Ä—É—Ç—Å—è –∏–∑ –ø—É–ª–∞ –ø–æ—Ç–æ–∫–æ–≤)                                                                                                                                                                                                                                                              | –æ–±—ã—á–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤                                                                                                                                           |
| –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å    | –≤—ã—Å–æ–∫–∞—è –∏ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –∑–∞ —Å—á–µ—Ç —Ç–æ–≥–æ, —á—Ç–æ –∑–∞–¥–∞—á–∞ (–∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–æ–ª–≥–æ) –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥—Ä—É–≥–æ–º—É –ø–æ—Ç–æ–∫—É, *–∞ —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö –∑–∞–¥–∞—á*; —Ç–∞–∫ —Å–æ–∫—Ä–∞—â–∞–µ—Ç—Å—è –≤—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è –ø–æ—Ç–æ–∫–∞, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–≥–ª–æ –±—ã –±—ã—Ç—å –≤–µ–ª–∏–∫–æ, –µ—Å–ª–∏ –±—ã —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ –∂–¥–∞–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ | –≤—ã—Å–æ–∫–∞—è *–∏–∑-–∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Ç–æ–∫–æ–≤*; –æ–¥–Ω–∞–∫–æ, —ç—Ç–æ –≤–ª–µ—á–µ—Ç –∑–∞ —Å–æ–±–æ–π —Ä–æ—Å—Ç –æ–±—ä–µ–º–∞ –ø–æ—Ç—Ä–µ–±–ª—è–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –û–°                                        |
| –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞        | `async, await, Task, Task<T>`                                                                                                                                                                                                                                                                                                      | `Thread, ThreadPool, Task, Parallel, BachgroundWorker`                                                                                                             |
| –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è | –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ (–∏–Ω–∞—á–µ`I/O-bound –æ–ø–µ—Ä–∞—Ü–∏–∏`): —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î –∏–ª–∏ –∏–∑ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞, `HTTP-–∑–∞–ø—Ä–æ—Å`                                                                                                                                                                                                                  | —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–∏–Ω–∞—á–µ`CPU-bound –æ–ø–µ—Ä–∞—Ü–∏–∏`): –ø–∞—Ä—Å–∏–Ω–≥ csv-—Ñ–∞–π–ª–∞ –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –Ω–µ–≥–æ, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —Å–ª–æ–∂–Ω—ã–µ –º–∞—Ç. —Ä–∞—Å—á–µ—Ç—ã |
–ú–æ–∂–Ω–æ –µ—â–µ –≥–ª—è–Ω—É—Ç—å –ø—Ä–∏–º–µ—Ä—á–∏–∫ [[–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏|üìë]]

–í–æ—Ç [[–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–µ, –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–µ, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ|must-have]]
#### üìå–ß—Ç–æ —Ç–∞–∫–æ–µ [[Race Condition|race condition (—Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏)]]? –ö–∞–∫ —Å –Ω–∏–º –±–æ—Ä–æ—Ç—å—Å—è?

**[[Race Condition|–°–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏ (race condition)]]** - —Å–∏—Ç—É–∞—Ü–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π –¥–≤–∞ –∏ –±–æ–ª–µ–µ –ø–æ—Ç–æ–∫–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –æ–±—â–µ–º—É —Ä–µ—Å—É—Ä—Å—É; –ø—Ä–∏ —ç—Ç–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Ö —Ä–∞–±–æ—Ç—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ç–æ–≥–æ, –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –æ–Ω–∏, –ø–æ—Ç–æ–∫–∏, –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è. –°–ø–æ—Å–æ–±—ã —Ä–µ—à–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã:
	- –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è [[üîêlock|lock]]
	- [[üö¶Semaphore|Semaphor]], [[üîí Mutex|Mutex]]
	- –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ ([[ConcurrentBag]], [[ConcurrentDictionary]])
	- [[‚ö°Interlocked|Interlocked]] (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Ç–∞–∫–∏—Ö –∫–∞–∫ `Increment`,¬†`Decrement`,¬†`Exchange` –∏ –ø—Ä–æ—á.)
	- `Immutable` –æ–±—ä–µ–∫—Ç—ã –∏–ª–∏ **–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ-on-write** - –∫–æ–≥–¥–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø–æ—Ç–æ–∫–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ–ø–∏—è –æ–±—â–µ–≥–æ —Ä–µ—Å—É—Ä—Å–∞, –∞ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ—Ç–æ–∫ –∑–∞–∫–æ–Ω—á–∏—Ç —Ä–∞–±–æ—Ç—É —Å —Ä–µ—Å—É—Ä—Å–æ–º, —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—â–∏–π —Ä–µ—Å—É—Ä—Å –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

üëÄ[[Race Condition vs DeadLock]]

#### üìå–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–º–µ–Ω—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π?
 
–ü—Ä–∏ –ø–æ–º–æ—â–∏ `CancellationToken`. 

>–ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ `HTTP-–∑–∞–ø—Ä–æ—Å–∞` —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω –ª–µ–∂–∏—Ç –≤ `HttpContext.RequestAborted` –∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è **–≤ –º–æ–º–µ–Ω—Ç –Ω–∞—á–∞–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞** –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π `ASP.NET Core`.
>
>*–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã `CancellationToken`*:
>
>*–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `HTTP-–∑–∞–ø—Ä–æ—Å` –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î. –ú—ã –ø–æ–ª—É—á–∞–µ–º –∑–∞–ø—Ä–æ—Å –∏ –Ω–∞—á–∏–Ω–∞–µ–º —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö. –ó–∞—Ç–µ–º, –ø–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –ø—Ä–∏—á–∏–Ω–∞–º, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å  –∑–∞–∫—Ä—ã–ª (–∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–ª) —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –≠—Ç–æ –ø–æ–≤–ª–µ–∫–ª–æ –∑–∞ —Å–æ–±–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è `RequestAborted.IsCancellationRequested` –Ω–∞ `true`, –æ–¥–Ω–∞–∫–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ —É –Ω–∞—Å —Å–µ—Ä–≤–µ—Ä–µ —É–∂–µ –∏–¥–µ—Ç. –ü–æ—ç—Ç–æ–º—É, —á—Ç–æ–±—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω—É–∂–Ω–æ —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä—É –æ —Å–ª—É—á–∏–≤—à–∏—Ö—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö. –≠—Ç–æ –∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–¥–∞—á—É –Ω—É–∂–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤ `CancellationToken`*

[^1]: CPU, Central Process Unit - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä

### üìë–ü—Ä–∏–º–∏—Ç–∏–≤—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

#### üìå–ß—Ç–æ —Ç–∞–∫–æ–µ [[üîêlock|lock]]? –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω?

–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ —è–∑—ã–∫–∞, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å [[Race Condition|—Å–æ—Å—Ç–æ—è–Ω–∏—è –≥–æ–Ω–∫–∏ (race condition)]]. –°–∏–Ω—Ç–∞–∫—Å–∏—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `lock` –Ω–∏–∂–µ:

```csharp
private readonly object _lockObject = new object();

public void MethodThatNeedsSynchronization()
{
    lock (_lockObject)
    {
        // –ó–∞—â–∏—â–µ–Ω–Ω—ã–π –∫–æ–¥
        // –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —ç—Ç–æ—Ç –±–ª–æ–∫ –≤ –µ–¥–∏–Ω–∏—Ü—É –≤—Ä–µ–º–µ–Ω–∏
    }
}
```

[[üîêlock|lock]] - —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä –Ω–∞–¥ –∫–ª–∞—Å—Å–æ–º [[üñ•Ô∏èMonitor|Monitor]]

##### ‚ö°–ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –Ω–∞–ø–∏—Å–∞—Ç—å¬†`await`¬†–≤–Ω—É—Ç—Ä–∏ [[üîêlock|lock]], —á—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –≤—Å–µ –∂–µ –Ω–∞–ø–∏—Å–∞—Ç—å?

–ù–µ–ª—å–∑—è –ø–∏—Å–∞—Ç—å `await`, —Ç.–∫. –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—é [[–û–±—É—á–µ–Ω–∏–µ/–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ/–¢–µ–æ—Ä–∏—è/CÔºÉ/–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–∫–∞/Deadlock|deadlock]] –∏–ª–∏ –∫ –≤—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏—é –∏—Å–∫–ª—é—á–µ–Ω–∏—è. –ü–æ—ç—Ç–æ–º—É –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ –¥–∞—Å—Ç –Ω–∞–ø–∏—Å–∞—Ç—å `await` –≤–Ω—É—Ç—Ä–∏ [[üîêlock|lock]].

–ö–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `await`, —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö –∑–∞–¥–∞—á. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –Ω–∞ **–¥—Ä—É–≥–æ–º –ø–æ—Ç–æ–∫–µ**. –ù–æ [[üîêlock|lock]] –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ—Ç–æ–∫—É - —Ç–æ—Ç –ø–æ—Ç–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ö–≤–∞—Ç–∏–ª –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –¥–æ–ª–∂–µ–Ω –µ–µ –∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å.

##### ‚ö°–ú–æ–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ [[üîêlock|lock]] –∑–Ω–∞—á–∏–º—ã–π —Ç–∏–ø?

*–ù–µ—Ç*, —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ `Microsoft` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –≤ [[üîêlock|lock]] –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–∏–±–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —Ç–∏–ø–∞ `System.Threading.Lock` , –ª–∏–±–æ –∫–∞–∫–æ–π-–ª–∏–±–æ —Å—Å—ã–ª–æ—á–Ω—ã–π —Ç–∏–ø.

–ü–æ—Å–∫–æ–ª—å–∫—É **–Ω–µ—É–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–µ** –∑–Ω–∞—á–∏–º—ã–µ —Ç–∏–ø—ã –Ω–µ –∏–º–µ—é—Ç –∏–Ω–¥–µ–∫—Å–∞ –±–ª–æ–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, —Ç–æ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–æ–≤, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—â–∏—Ö —Å–≤–æ–π –¥–æ—Å—Ç—É–ø –∫ —ç–∫–∑–µ–º–ø–ª—è—Ä—É —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥—ã —Ç–∏–ø–∞ `System.Threading.Monitor` (–∏–ª–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è **lock** —è–∑—ã–∫–∞ `C#`). –ß–∏—Å—Ç–æ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏, –º–æ–∂–Ω–æ —É–ø–∞–∫–æ–≤–∞—Ç—å –∑–Ω–∞—á–∏–º—ã–π —Ç–∏–ø –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –µ–≥–æ –≤ [[üîêlock|lock]], ***–Ω–æ –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –∫–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —É–ø–∞–∫–æ–≤–∫–∏ ==–ø–æ—Ä–æ–∂–¥–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –≤ –ø–∞–º—è—Ç–∏==, –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é —Å–µ–∫—Ü–∏—é —Ä–∞–∑–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –±—É–¥—É—Ç –∏–º–µ—Ç—å –¥–µ–ª–æ —Å —Ä–∞–∑–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏, –∞ –Ω–µ —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∑–Ω–∞—á–∏–º—ã–º —Ç–∏–ø–æ–º***.

#### üìå–ß—Ç–æ —Ç–∞–∫–æ–µ [[üîí Mutex|mutex]]? –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω?

–û–¥–∏–Ω –∏–∑ –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç **–≤ –æ–¥–∏–Ω –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å—É —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–º—É –ø–æ—Ç–æ–∫—É**. [[üîí Mutex|Mutex]] —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã [[Race Condition|race condition]].

#### üìå–ß—Ç–æ —Ç–∞–∫–æ–µ [[üö¶Semaphore|Semaphore]]? –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω?
 
–û–¥–∏–Ω –∏–∑ –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç **–≤ –æ–¥–∏–Ω –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∫ —Ä–µ—Å—É—Ä—Å—É —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ—Ç–æ–∫–∞–º**. [[üö¶Semaphore|Semaphore]] - –æ–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤¬†—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã [[Race Condition|race condition]]. –ü–æ –ø—Ä–∏—á–∏–Ω–µ —Ç–æ–≥–æ, —á—Ç–æ [[üö¶Semaphore|Semaphore]] –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –æ–±—â–µ–º—É —Ä–µ—Å—É—Ä—Å—É —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ—Ç–æ–∫–∞–º –≤ –æ–¥–∏–Ω –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å—é –µ–≥–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —è–≤–ª—è–µ—Ç—Å—è **–Ω–∞–ª–∏—á–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –¥–æ—Å—Ç—É–ø–∞**, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å—É –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

#### üìå–ß—Ç–æ —Ç–∞–∫–æ–µ [[‚ö°Interlocked|Interlocked]]? –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω?

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å –≤ `.NET`,  –∫–æ—Ç–æ—Ä—ã–π **–ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ —É—Å–ª–æ–≤–∏—è—Ö –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏**. –•–∞—Ä–∞–∫—Ç–µ—Ä–Ω–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å [[‚ö°Interlocked|Interlocked]] - —Ä–∞–±–æ—Ç–∞ *—Ç–æ–ª—å–∫–æ —Å –∞—Ç–æ–º–∞—Ä–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏*, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫–∏–º–∏: –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç, –¥–µ–∫—Ä–µ–º–µ–Ω—Ç, –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏ –ø—Ä–æ—á.

#### üìå–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π [[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º (user mode)|–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞]] –∏ [[–†–µ–∂–∏–º —è–¥—Ä–∞ (kernel mode)|—Ä–µ–∂–∏–º–∞ —è–¥—Ä–∞]]?

|                            | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞ (user-mode locking)                                                                           | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–∂–∏–º–∞ —è–¥—Ä–∞ (kernel-mode locking)                                                                       |
| -------------------------- | --------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ |
| –ø—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã             | —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ç.–µ. –≤ —Å–∞–º–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ —è–¥—Ä—É –û–°                                   | —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —è–¥—Ä–æ –û–°, –ø—Ä–∏ —ç—Ç–æ–º –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–æ—á–µ—Ä–µ–¥–∏ –æ–∂–∏–¥–∞–Ω–∏—è –∏ –ø—Ä–æ—á.) |
| –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç | –Ω–µ—Ç                                                                                                                               | **–¥–∞**                                                                                                             |
| –æ–±–ª–∞—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏—è           | —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö **–æ–¥–Ω–æ–≥–æ** –ø—Ä–æ—Ü–µ—Å—Å–∞                                                                                           | –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –º–µ–∂–¥—É **—Ä–∞–∑–ª–∏—á–Ω—ã–º–∏** –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏                                                                     |
| –ø—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏          | [[üîêlock\|lock]], [[üñ•Ô∏èMonitor\|Monitor]], SpinLock, [[‚ö°Interlocked\|Interlocked]] (—á–∞—Å—Ç–∏—á–Ω–æ), [[‚öúÔ∏èSemaphoreSlim\|SemaphoreSlim]] | [[üîí Mutex\|Mutex]], [[üö¶Semaphore\|Semaphore]]                                                                    |
| –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å         | –≤—ã—Å–æ–∫–∞—è                                                                                                                           | –Ω–∏–∑–∫–∞—è –∏–∑-–∑–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤                                                                                     |
| —Ä–∞—Å—Ö–æ–¥ –ø–∞–º—è—Ç–∏              | –Ω–µ –≤—ã—Å–æ–∫–∏–π                                                                                                                        | –≤—ã—Å–æ–∫–∏–π –∏–∑-–∑–∞ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–∏—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –û–°                                                       |

#### üìå–ß–µ–º –æ—Ç–ª–∏—á–∞—é—Ç—Å—è Slim –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ—Ç –æ–±—ã—á–Ω—ã—Ö?

|                                         | –û–±—ã—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞                                                              | `Slim` –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞                                                                                                                                              |
| --------------------------------------- | ------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π          | –Ω–µ—Ç                                                                             | –¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `SemaphoreSlim.WaitAsync()`)                                                                                                                     |
| –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ | –¥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä [[üîí Mutex\|Mutex]]                                                | –Ω–µ—Ç, —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞                                                                                                                             |
| –≥–¥–µ —Ä–∞–±–æ—Ç–∞—é—Ç                            | —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —è–¥—Ä–∞                                                            | –æ–±—ã—á–Ω–æ —Å–Ω–∞—á–∞–ª–∞ —Å–ø–∏–Ω –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º<br>—Ä–µ–∂–∏–º–µ, –∑–∞—Ç–µ–º, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏<br>(–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –æ–±—â–∏–π —Ä–µ—Å—É—Ä—Å<br>–Ω–µ –æ—Å–≤–æ–±–æ–¥–∏–ª—Å—è), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—ã—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ |
| –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏                             | - –±–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏<br>- —Ä–∞–±–æ—Ç–∞—é—Ç –º–µ–¥–ª–µ–Ω–Ω–µ–µ                                         | - –º–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏<br>- —Ä–∞–±–æ—Ç–∞—é—Ç –±—ã—Å—Ç—Ä–µ–µ                                                                                                                          |
| –ø—Ä–∏–º–µ—Ä—ã                                 | - [[üîí Mutex\|Mutex]]<br>- [[ReaderWriterLock]]<br>- [[üö¶Semaphore\|Semaphore]] | - [[‚öúÔ∏èSemaphoreSlim\|SemaphoreSlim]]<br>- [[ReaderWriterLockSlim]]                                                                                             |

### üìë–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å

#### üìå–ß—Ç–æ —Ç–∞–∫–æ–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ?

–ü–æ–¥—Ö–æ–¥ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã. –ü—Ä–∏ —ç—Ç–æ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –Ω–µ —Ä–∞–≤–Ω–æ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å, —Ç.–∫. –∑–∞—á–∞—Å—Ç—É—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —Ç–æ–º –∂–µ –ø–æ—Ç–æ–∫–µ, —á—Ç–æ –∏ –≤—ã–∑–≤–∞–ª –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é. –ö–æ–¥, –≤—ã–∑—ã–≤–∞—é—â–∏–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é, –Ω–µ –∑–Ω–∞–µ—Ç –∫–∞–∫ –∏ –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∑–∞–¥–∞—á–∞, –∞ —Ç–æ–ª—å–∫–æ –∂–¥–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏ (—Å–º. –ø—Ä–∏–º–µ—Ä –ø–æ [[üîÉ–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏|—Å—Å—ã–ª–∫–µ]]):
	- `Task/Task<T>` —Å `async/await`
	- –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∑–∞–¥–∞—á (`Task Continuations`)
	- –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
	- –°–æ–±—ã—Ç–∏—è (`Events`) –∏ —à–∞–±–ª–æ–Ω –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—ã—Ç–∏–π `(EAP)`
	- `IAsyncEnumerable<T> (C# 8.0+) `–¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

#### üìå–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É¬†`Thread`¬†–∏¬†`Task`?

[[–û–±—É—á–µ–Ω–∏–µ/–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ/–¢–µ–æ—Ä–∏—è/CÔºÉ/–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å/Task|Task]] –≤–≤–µ–ª–∏ –ø–æ—Ç–æ–º—É, —á—Ç–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–æ—Ç–æ–∫–æ–≤ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å —É–∑–Ω–∞—Ç—å –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —ç—Ç–æ–π —Å–∞–º–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.

>–ë—ã–ª–æ `ThreadPool.QueueUserWorkItem(ComputeBoundUp, 5);` —Å—Ç–∞–ª–æ `new Task(ComputeBoundUp, 5).Start();` –∏–ª–∏ `Task.Run(() => ComputeBoundUp(5));`

|                                | `Thread`                                                                                                                                                                                         | `Task`                                                                                                                                                  |
| ------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| —É—Ä–æ–≤–µ–Ω—å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏             | –Ω–∏–∑–∫–∏–π, —Ç.–∫. `Thread` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–æ —Å—É—Ç–∏ –ø–æ—Ç–æ–∫ –û–°                                                                                                                                        | **–≤—ã—Å–æ–∫–∏–π**, –ø—Ä–∏ —ç—Ç–æ–º –º–æ–∂–µ—Ç –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–∫ –∏<br>–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è<br>–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π                                     |
| –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `async/await`        | –Ω–µ—Ç                                                                                                                                                                                              | **–¥–∞**                                                                                                                                                  |
| –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤           | –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ, —Ç.–∫. –ø–æ —Å—É—Ç–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –û–°                                                                                                                                          | **–Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ**, —Ç.–∫ –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –ø–æ—Ç–æ–∫–∏ –Ω—É–∂–Ω—ã,<br>—Ç–æ –æ–Ω–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ `ThreadPool`,<br>–∞ –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –Ω—É–∂–Ω—ã, –∏ —Ç–æ–≥–æ –º–µ–Ω—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –±—É–¥–µ—Ç –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–æ |
| –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã | –Ω–µ—Ç, —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `shared` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (—Å–º. –ø—Ä–∏–º–µ—Ä –ø–æ [[üî∫Thread ¬∑ –ö–∞–∫ –≤–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã\|—Å—Å—ã–ª–∫–µ]])                                                                                       | –º–æ–∂–Ω–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ `Task<T>`                                                                                                                              |
| –º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é        | –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π `Thread.Abort()`;<br>–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ, —Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å<br>—Ñ–ª–∞–≥–∏ –æ—Ç–º–µ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Ç–æ–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ–±—ã<br>–ø–æ–Ω—è—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –µ–º—É –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é<br>–∏–ª–∏ –Ω–µ—Ç | –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ `CancellationToken`                                                                                                                         |

#### üìå–î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞¬†`async`¬†–∏¬†`await`?

| `async`                                                                                                                                                                                                                                                                                                                | `await`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| - –µ—Å–ª–∏ –ø–æ–º–µ—Ç–∏—Ç—å –º–µ—Ç–æ–¥ –∫–∞–∫ `async`, —Ç–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä<br>–±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ –≤ –∫–æ–¥–µ –º–µ—Ç–æ–¥–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è<br>`await`<br>- –º–µ—Ç–æ–¥, –ø–æ–º–µ—á–µ–Ω–Ω—ã–π –∫–∞–∫ `async`, –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `Task`,<br>`Task<T>, ValueTask<T>`<br>- –ø–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –º–µ—Ç–æ–¥, –ø–æ–º–µ—á–µ–Ω–Ω—ã–π –∫–∞–∫ `async`, –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è<br>–≤ —Ç–∏–ø, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –∫–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç | - **–æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ø–æ—Ç–æ–∫**, –∏—Å–ø–æ–ª–Ω—è—é—â–∏–π –∫–æ–¥, –Ω–∞ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏,<br>–ø–æ—ç—Ç–æ–º—É —ç—Ç–æ—Ç –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥—Ä—É–≥–∏–µ –∑–∞–¥–∞—á–∏<br>- **–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞**, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—Å—Ç—Ä–µ—Ç–∏–ª—Å—è `await`, **–ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä**,<br>–ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏<br>- –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –º–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Task<T>`, —Ç–æ `await` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ "—Ä–∞—Å–ø–∞–∫—É–µ—Ç"<br>—Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ —Ç–∏–ø `T`<br>- –∫–æ–≥–¥–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞,<br>"–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π" –º–µ—Ç–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –∏—Å–ø–æ–ª–Ω—è—Ç—å—Å—è —Å –º–µ—Å—Ç–∞, –≥–¥–µ –æ–Ω –±—ã–ª –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω |

#### üìå–í–æ —á—Ç–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥?

**–í –∫–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç.** –ü–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –º–µ—Ç–æ–¥–∞, –ø–æ–º–µ—á–µ–Ω–Ω–æ–≥–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º `async`, —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω–µ—á–Ω–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –º–µ—Ç–æ–¥–∞. **–°–æ—Å—Ç–æ—è–Ω–∏—è–º–∏** –≤ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –º–µ—Ç–æ–¥–∞ –±—É–¥—É—Ç —è–≤–ª—è—Ç—å—Å—è —Ç–æ—á–∫–∏ –≤ –∫–æ–¥–µ, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º `await`. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ `await`, —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ—Ç–æ–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥–æ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤—ã–∑—ã–≤–∞–≤—à–µ–º—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –∫–æ–¥—É. –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –±—É–¥–µ—Ç –æ–∫–æ–Ω—á–µ–Ω–æ, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ "–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ" –º–µ—Ç–æ–¥–∞ –±—É–¥–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–æ –Ω–∞ —Å—Ç—Ä–æ–∫–µ —Å `await` –∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

#### üìå–ü–æ—á–µ–º—É —Å–ª–µ–¥—É–µ—Ç –∏–∑–±–µ–≥–∞—Ç—å¬†`async void`?
   
- –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å, –∫–æ–≥–¥–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞, —Ç.–∫. –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è
<br/>
- —Ç—è–∂–µ–ª–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –∑–Ω–∞–µ–º, –∫–æ–≥–¥–∞ –æ–Ω–∏ –±—É–¥—É—Ç –∑–∞–≤–µ—Ä—à–µ–Ω—ã
<br/>
- –∫–æ–¥, –≤—ã–∑—ã–≤–∞—é—â–∏–π `async void` –º–µ—Ç–æ–¥, –Ω–µ —Å–º–æ–∂–µ—Ç –æ—Ç–ª–æ–≤–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ `try/catch`, –≤–æ–∑–Ω–∏–∫—à–∏–µ –≤ `async void` –º–µ—Ç–æ–¥–µ (–∏—Å–∫–ª—é—á–µ–Ω–∏—è, –≤–æ–∑–Ω–∏–∫—à–∏–µ –≤ `async void` –º–µ—Ç–æ–¥–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è –≤ `SynchronizationContext`)

>[!note] –î–ª—è —Å–ø—Ä–∞–≤–∫–∏
>**–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ `async void` –º–µ—Ç–æ–¥–æ–≤ - `UI-–ø–æ—Ç–æ–∫–∏` –≤ WinForms –∏–ª–∏ WPF –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö**


–ö–æ–≥–¥–∞ –≤ –æ–±—ã—á–Ω–æ–º –º–µ—Ç–æ–¥–µ `async Task` –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –æ–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Å–≤–æ–π—Å—Ç–≤–µ `Exception` –æ–±—ä–µ–∫—Ç–∞ `Task`. –í—ã–∑—ã–≤–∞—é—â–∏–π –∫–æ–¥ –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å —ç—Ç–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é –±–ª–æ–∫–∞ `try-catch` –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏–≤ –∑–∞–¥–∞—á—É –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è.

–ù–æ –º–µ—Ç–æ–¥—ã `async void` –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `Task`, –ø–æ—ç—Ç–æ–º—É —É –Ω–∏—Ö –Ω–µ—Ç –º–µ—Å—Ç–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–ª–µ–¥—É—é—â–µ–µ:

1. –ö–æ–≥–¥–∞ –≤ –º–µ—Ç–æ–¥–µ `async void` –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è .NET –∏—â–µ—Ç —Ç–µ–∫—É—â–∏–π `SynchronizationContext` (—ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø–æ—Ç–æ–∫–æ–≤ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏).
2. –ó–∞—Ç–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ "–ø—É–±–ª–∏–∫—É–µ—Ç—Å—è" –∏–ª–∏ "—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è" –≤ —ç—Ç–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ `SynchronizationContext.Current.Post()`.
3. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —ç—Ç–æ –∏–º–µ–µ—Ç —Ä–∞–∑–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:
    - –í WPF/Windows Forms –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö —ç—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–º—É –∏—Å–∫–ª—é—á–µ–Ω–∏—é –≤ UI-–ø–æ—Ç–æ–∫–µ, —á—Ç–æ –æ–±—ã—á–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç –∞–≤–∞—Ä–∏–π–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    - –í ASP.NET —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Å–±—Ä–æ—Å—É –∑–∞–ø—Ä–æ—Å–∞ –∏–ª–∏ –¥–∞–∂–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –¥–æ–º–µ–Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    - –í –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –∏–ª–∏ —Ñ–æ–Ω–æ–≤—ã—Ö —Å–ª—É–∂–±–∞—Ö —ç—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –±–µ–∑–º–æ–ª–≤–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

–í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–º —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≤–Ω–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–∞, –ø–æ—ç—Ç–æ–º—É –æ–±—ã—á–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç. –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å —Ç–∞–∫–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ç–æ–º –º–µ—Å—Ç–µ, –≥–¥–µ –≤—ã–∑—ã–≤–∞–ª–∏ `async void` –º–µ—Ç–æ–¥ ‚Äî –∫ –º–æ–º–µ–Ω—Ç—É –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤ —É–∂–µ "—Ä–∞–∑–º–æ—Ç–∞–Ω" –∏–∑-–∑–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –ø—Ä–∏—Ä–æ–¥—ã –æ–ø–µ—Ä–∞—Ü–∏–∏.

–≠—Ç–æ –¥–µ–ª–∞–µ—Ç `async void` –º–µ—Ç–æ–¥—ã –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º–∏ –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã–º–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–º –∫–æ–¥–µ.

–ß–∏—Ç–∞–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∑–∞–º–µ—Ç–∫—É *"[[–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è async void –º–µ—Ç–æ–¥–æ–≤]]"*

#### üìå–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω –º–µ—Ç–æ–¥ `ConfigureAwait()`?

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å –∫–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `await`. –ú–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `bool`¬† –ø–∞—Ä–∞–º–µ—Ç—Ä, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω—É–∂–Ω–æ –ª–∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∏—Å—Ö–æ–¥–Ω—ã–π `SynchronizationContext` –∏–ª–∏ –∂–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –≤ –ª—é–±–æ–º –¥–æ—Å—Ç—É–ø–Ω–æ–º –ø–æ—Ç–æ–∫–µ –∏–∑ –ø—É–ª–∞ –ø–æ—Ç–æ–∫–æ–≤. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–µ—Ç–æ–¥–∞ `ConfigureAwait()`:
   - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ `dedalocks`
   - –ø–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —Ç.–∫. –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏
   - —É–º–µ–Ω—å—à–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –∫–æ–≥–¥–∞ –Ω–µ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π `SynchronizationContext`

#### üìå–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å¬†`ValueTask`¬†–≤–º–µ—Å—Ç–æ¬†`Task`?

‚úÖ–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –ø–æ—ç—Ç–æ–º—É –æ—Ç–≤–µ—Ç –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
‚úÖ–≤ —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –º–µ—Ç–æ–¥ **–ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –Ω–æ –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ `async`
‚úÖ–µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç—ã—Å—è—á–∏ –∏–ª–∏ –º–∏–ª–ª–∏–æ–Ω—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (—Ç.–∫. `ValueTask` - —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —Ç–æ –æ–Ω–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –≤ –ø–∞–º—è—Ç–∏ –º–µ–Ω—å—à–µ –º–µ—Å—Ç–∞)
‚úÖ–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã: `IAsyncEnumerable<T>` –∏–ª–∏ `IAsyncEnumerator<T>` (—Å `ValueTask` —ç—Ç–∏ —Ç–∏–ø—ã –¥–∞—é—Ç –ø—Ä–∏—Ä–æ—Å—Ç –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)

>*–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å `ValueTask`:*
‚ùó*–Ω–µ–ª—å–∑—è —Ö—Ä–∞–Ω–∏—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, —Ç.–µ. –Ω–µ–ª—å–∑—è –≤—ã–∑—ã–≤–∞—Ç—å `await` —É –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ `ValueTask` –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞ –∏–ª–∏ –ø—ã—Ç–∞—Ç—å—Å—è –µ–≥–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å*
‚ùó*–Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å `ContinueWith(), WhenAll(), WhenAny(), lock, using, foreach, async void`*

#### üìå–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω –º–µ—Ç–æ–¥¬†`Task.WhenAll`? –í —á–µ–º –æ—Ç–ª–∏—á–∏—è –æ—Ç¬†`Task.WaitAll`?

|                                                    | `Task.WhenAll()`                        | `Task.WaitAll()`                                                                        |
| -------------------------------------------------- | --------------------------------------- | --------------------------------------------------------------------------------------- |
| –∫–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∂–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è **–≤—Å–µ—Ö –∑–∞–¥–∞—á**       | –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ                              | —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ                                                                               |
| –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫ –ø—Ä–∏ –æ–∂–∏–¥–∞–Ω–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á | –Ω–µ—Ç                                     | **–¥–∞**                                                                                  |
| –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç                                         | `Task` –∏–ª–∏ `Task<TResult[]>`            | `void`                                                                                  |
| –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Å `await`                   | **–¥–∞**                                  | –Ω–µ—Ç                                                                                     |
| –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è                              | `async/await` –∫–æ–¥ (`UI`, `Web`, –∏ —Ç.–¥.) | —Ç–æ–ª—å–∫–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥<br>(–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–∫–µ -<br>–º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å `deadlock`) |

#### üìå–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω –º–µ—Ç–æ–¥¬†`Task.WhenAny`? –í —á–µ–º –æ—Ç–ª–∏—á–∏—è –æ—Ç¬†`Task.WaitAny`?

|                                                        | `Task.WhenAny()`                        | `Task.WaitAny()`                          |
| ------------------------------------------------------ | --------------------------------------- | ----------------------------------------- |
| –∫–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∂–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è **–ª—é–±–æ–π –æ–¥–Ω–æ–π –∏–∑ –∑–∞–¥–∞—á** | –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ                              | —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ                                 |
| –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫ –ø—Ä–∏ –æ–∂–∏–¥–∞–Ω–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á     | –Ω–µ—Ç                                     | **–¥–∞**                                    |
| –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç                                             | `Task`(–ø–µ—Ä–≤–∞—è –∑–∞–≤–µ—Ä—à–∏–≤—à–∞—è—Å—è)            | `int`(–∏–Ω–¥–µ–∫—Å –ø–µ—Ä–≤–æ–π –∑–∞–≤–µ—Ä—à–∏–≤—à–µ–π—Å—è –∑–∞–¥–∞—á–∏) |
| –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Å `await`                       | **–¥–∞**                                  | –Ω–µ—Ç                                       |
| –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è                                  | `async/await` –∫–æ–¥ (`UI`, `Web`, –∏ —Ç.–¥.) | —Ç–æ–ª—å–∫–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥                     |

### üìë–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏

#### üìå–ö–∞–∫–∏–µ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ .NET?

`ConcurrentStack<T>, ConcurrentQueue<T>, ConcurrentBag<T>, ConcurrentDictionary<TKey, TValue>, BlockingCollection<T>`

#### üìå–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É¬†`ConcurrentDictionary`¬†–∏¬†`Dictionary`¬†—Å¬†`lock`?

- `ConcurrentDictionary` –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç `Dictionary`¬†—Å¬†`lock`–±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å —Å–ª–æ–≤–∞—Ä—è, –∫–æ—Ç–æ—Ä–∞—è –Ω—É–∂–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö

- `Dictionary`¬†–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏; –ø–æ—ç—Ç–æ–º—É, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Å—Ä–µ–¥–µ, –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –≤ `lock` –¥–æ—Å—Ç—É–ø –∫ —Å–ª–æ–≤–∞—Ä—é (—Å–º. –ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ)
<br/>
```csharp
private readonly object _lock = new();
private Dictionary<string, string> _dict = new();

public void Add(string key, string value)
{
    lock (_lock)
    {
        _dict[key] = value;
    }
}
```

#### üìå–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç ImmutableCollections?

–ö–æ–≥–¥–∞ –≤–Ω–æ—Å–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é, —Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏, –Ω–æ —É–∂–µ —Å –≤–Ω–µ—Å–µ–Ω–Ω—ã–º–∏ –≤ –Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ (–∏–∑–≤–µ—Å—Ç–µ–Ω –∫–∞–∫ "–ø—Ä–∏–Ω—Ü–∏–ø —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è" - —á–∏—Ç–∞–π –Ω–∏–∂–µ). –ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Ä–∞–±–æ—Ç—ã –º–µ—Ç–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—Ä–æ–¥–µ –∫–∞–∫ –¥–æ–ª–∂–Ω—ã –∏–∑–º–µ–Ω—è—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é (—Ç–∞–∫–∏–µ –∫–∞–∫ `Add(), Romove()` –∏ –ø—Ä–æ—á.) —è–≤–ª—è–µ—Ç—Å—è ***–Ω–æ–≤–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è —Å –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤***.

>[!warning] –í–∞–∂–Ω–æ
>
>`ImmutableCollections` –Ω–µ –¥–∞—é—Ç  –∏–∑–º–µ–Ω—è—Ç—å –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é, **–ù–û** —Å–∞–º–∏ —ç–ª–µ–º–µ–Ω—Ç—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω—ã.

–ß–∞—â–µ –≤—Å–µ–≥–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π `ImmutableCollections` —è–≤–ª—è–µ—Ç—Å—è —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –±–∏–Ω–∞—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ (`AVL-–¥–µ—Ä–µ–≤–æ`).

–ü—Ä–∏–º–µ—Ä—ã –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö `ImmutableCollections`: 
- `ImmutableArray<T>`
- `ImmutableList<T>`
- `ImmutableDictionary<TKey, TValue>`
- `ImmutableHashSet<T>`
- `ImmutableQueue<T>`
- `ImmutableStack<T>`

–ú–µ—Ö–∞–Ω–∏–∑–º, –±–ª–∞–≥–æ–¥–∞—Ä—é –∫–æ—Ç–æ—Ä–æ–º—É `ImmutableCollections` —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã –≤ –ø–ª–∞–Ω–µ –ø–∞–º—è—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, - **—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ** (`structural sharing`). –û–Ω –æ–∑–Ω–∞—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ: *–∫–æ–≥–¥–∞ –º—ã –º–µ–Ω—è–µ–º "–Ω–µ–∏–∑–º–µ–Ω—è–µ–º—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é", —Ç–æ —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø–æ –º–∞–∫—Å–∏–º—É–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã—Ö –∫–æ—Å–Ω—É—Ç—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏—è (—Å–º. –ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ).*

```csharp
var original = ImmutableList<int>.Empty.Add(10).Add(20).Add(30);

var modified = original.Add(15);
```

–ß—Ç–æ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º:

```mermaid
graph TD
	subgraph original
	  20
	  20 --> 10
	  20 --> 30
	end
	subgraph modified
		a["20'(new node)"]
		a --> b["10'(new node)"]
		a --> c["30(original node)"]
		b --> d["15(added node)"]
	end
```

## üìî–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

#priority/üî•high #üìëtheory/üß†cÔºÉ 

### üìë–î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã Nullable —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö?

`Nullable` —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ–∑–≤–æ–ª—è—é—Ç –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `null` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –∑–Ω–∞—á–∏–º—ã—Ö —Ç–∏–ø–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ `int, bool`.

>*–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ `.NET` –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∑–Ω–∞—á–∏–º–æ–≥–æ —Ç–∏–ø–∞ –Ω–µ–ª—å–∑—è –ø—Ä–∏—Å–≤–æ–∏—Ç—å `null`, —Ç.–∫. —ç—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Ö—Ä–∞–Ω–∏—Ç –Ω–∞–ø—Ä—è–º—É—é –∑–Ω–∞—á–µ–Ω–∏–µ, –∞ –Ω–µ —Å—Å—ã–ª–∫—É. –î–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ–±—ä—è–≤–∏—Ç—å –≤ –∫–ª–∞—Å—Å–µ –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∑–Ω–∞—á–∏–º–æ–≥–æ —Ç–∏–ø–∞ –±–µ–∑ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è –µ–π –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ –∑–Ω–∞—á–µ–Ω–∏—è, —Ç–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤—Å–µ —Ä–∞–≤–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ—Ç–æ—Ä–æ–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω–æ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª–µ –≤ –∫–ª–∞—Å—Å–µ `int a;` —Ä–∞–≤–Ω–æ—Å–∏–ª—å–Ω–æ`int a = 0;`, —Ç.–∫.`0` - —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–∏–ø–∞ `int`.*

–û–¥–Ω–∞–∫–æ, –≤ —Ä–∞–±–æ—Ç–µ —á–∞—Å—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∑–Ω–∞—á–∏–º–æ–≥–æ —Ç–∏–ø–∞ –±–µ–∑ –∑–Ω–∞—á–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, —É –Ω–∞—Å –µ—Å—Ç—å –ë–î  –≤ –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç—å –∫–æ–ª–æ–Ω–∫–∞, —Ö—Ä–∞–Ω—è—â–∞—è —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ. 

–ï—Å–ª–∏ —Å—Ö–µ–º–æ–π –ë–î –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ, —á—Ç–æ –¥–∞–Ω–Ω—ã–π —Å—Ç–æ–ª–±–µ—Ü –¥–æ–ø—É—Å–∫–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è, —Ç–æ–≥–¥–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ë–î –∏–∑ –∫–æ–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞: –∫–∞–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–ª–µ –∫–ª–∞—Å—Å–∞-—Å—É—â–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É?

–î–ª—è —Ä–µ—à–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã –±—ã–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã `null-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–∏–º—ã–µ —Ç–∏–ø—ã` (`nullable value types`), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –æ–±—ä—è–≤–∏—Ç—å –æ–¥–Ω–∏–º –∏–∑ –¥–≤—É—Ö —Å–ø–æ—Å–æ–±–æ–≤:

```csharp
// way #1
Nullable<int> val = null;

// way #2
int? val = null;
```

### üìë–í —á–µ–º –æ—Ç–ª–∏—á–∏–µ string –æ—Ç StringBuilder?

|                                                       | `string`                                                                                         | `StringBuilder`                                                                                                                                                                                                                                                                                                 |
| ----------------------------------------------------- | ------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| —è–≤–ª—è–µ—Ç—Å—è `immutable`                                  | –¥–∞                                                                                               | –Ω–µ—Ç                                                                                                                                                                                                                                                                                                             |
| –∞–ª–≥–æ—Ä–∏—Ç–º –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫–∏ | –≤ –ø–∞–º—è—Ç–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏–º–µ—Ç—å **–Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É** –Ω–∞ –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏          | –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π `character array` –±–æ–ª—å—à–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, —á—Ç–æ–±—ã –æ–Ω –º–æ–≥ –≤–º–µ—Å—Ç–∏—Ç—å "–Ω–æ–≤—É—é", –±**–æ**–ª—å—à—É—é  —Å—Ç—Ä–æ–∫—É, –∏ –≤ –Ω–µ–≥–æ –±—É–¥—É—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã —Å–∏–º–≤–æ–ª—ã –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ `character array`, –∞ –≤ –∫–æ–Ω–µ—Ü –±—É–¥—É—Ç –¥–æ–ø–∏—Å–∞–Ω—ã –Ω–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã (—Ç.–µ. —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Å—Ç—Ä–æ–∫—É, –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å–ª—É—á–∞—è —Å `string`) |
| –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å                                    | –¥–∞, —Ç.–∫.`immutable`                                                                              | –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –Ω–µ—Ç                                                                                                                                                                                                                                                                                               |
| —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π                                    | –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã `==` –∏ `!=`                                                         | –∏–∑ –∫–æ—Ä–æ–±–∫–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –Ω–µ—Ç                                                                                                                                                                                                                                                                         |
| –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ                                         | - –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫—É –Ω–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è<br>- —Ä–µ–≥—É–ª—è—Ä–∫–∏<br>- –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã<br>- –∫–ª—é—á–∏ –≤ —Å–ª–æ–≤–∞—Ä—è—Ö | - –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å —Å—Ç—Ä–æ–∫—É –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á–∞—Å—Ç–µ–π<br>- –±–æ–ª—å—à–∏–µ —Ç–µ–∫—Å—Ç—ã (–ø–∞—Ä—Å–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤, —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤)<br>- –∫–æ–≥–¥–∞ —Å–æ–±–∏—Ä–∞–µ–º `sql-–∑–∞–ø—Ä–æ—Å` –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —É—Å–ª–æ–≤–∏–π<br>- –≥–µ–Ω–µ—Ä–∞—Ü–∏—è `HTML/XML/JSON`<br>- –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç –±–µ—Ä–µ—Ç—Å—è –∏–∑ –ø–æ—Ç–æ–∫–∞ –∏ –ø–æ—Ç–æ–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è                                                           |
### üìë–ß—Ç–æ —Ç–∞–∫–æ–µ –∏–Ω—Ç–µ—Ä–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫?

–ú–µ—Ö–∞–Ω–∏–∑–º, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã —è–≤–ª—è—é—Ç—Å—è –æ–¥–∏–Ω –∏ —Ç–µ–º –∂–µ –æ–±—ä–µ–∫—Ç–æ–º –≤ –ø–∞–º—è—Ç–∏. –¢.–µ. –µ—Å–ª–∏ –¥–≤–µ —Å—Ç—Ä–æ–∫–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, —Ç–æ –≤ –ø–∞–º—è—Ç–∏ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä** —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è:

```csharp
string a = "Hello";
string b = "Hello";
bool areEqual = object.ReferenceEquals(a, b); // True, —Ç.–∫. `a`¬†–∏¬†`b`¬†—É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç –≤ –ø–∞–º—è—Ç–∏.
```

### üìë–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫?

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ —Å—Ç—Ä–æ–∫–∏ —è–≤–ª—è—é—Ç—Å—è —Å—Å—ã–ª–æ—á–Ω—ã–º —Ç–∏–ø–æ–º, –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ –¥–≤—É—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–∏–ø–∞ `string` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —ç—Ç–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∞ –Ω–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏, –∫–∞–∫ –æ–±—ã—á–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å —Å—Å—ã–ª–æ—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏. –≠—Ç–æ –¥–æ—Å—Ç—É–ø–Ω–æ –ª–∏—à—å –ø–æ—Ç–æ–º—É, —á—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ `==` –∏ `!=` –±—ã–ª–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–∏–ø–∞ `string`

### üìë–ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–µ—Ñ–ª–µ–∫—Å–∏—è?

–≠—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø—Ä–æ–≥—Ä–∞–º–º–µ –≤ `runtime` –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–∏–ø–∞—Ö, –º–µ—Ç–æ–¥–∞—Ö, —Å–≤–æ–π—Å—Ç–≤–∞—Ö, –ø–æ–ª—è—Ö –∏ –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∞ —Ç–∞–∫–∂–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã, –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –∏ –∏–∑–º–µ–Ω—è—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞. *–°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:*
	- –ü–ª–∞–≥–∏–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
		1. –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
		2. –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ç–∏–ø–æ–≤, —Ä–µ–∞–ª–∏–∑—É—é—â–∏—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
    - ORM –∏ –º–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö
	    1. –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
	    2. –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON –∏ XML
	- –ò–Ω–≤–µ—Ä—Å–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (IoC) –∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (DI)
		1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
	- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
		1. –î–æ—Å—Ç—É–ø –∫ –∑–∞–∫—Ä—ã—Ç—ã–º —á–ª–µ–Ω–∞–º –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
		2. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–≥–ª—É—à–µ–∫ (–º–æ–∫–æ–≤) –∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥—É–±–ª–µ–π
	- –ú–µ—Ç–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ
		1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
		2. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–∫—Å–∏ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ç–∏–ø–æ–≤

>–ï—Å–ª–∏ –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—Ñ–ª–µ–∫—Å–∏—é, —Ç–æ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è `dynamic`.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏:
```csharp
service.AddScoped<IOrderService, OrderService>();
```

### üìë–ß—Ç–æ —Ç–∞–∫–æ–µ —É–ø–∞–∫–æ–≤–∫–∞ –∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞, –∫–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?

**–£–ø–∞–∫–æ–≤–∫–∞** (`boxing`) - –ø—Ä–æ—Ü–µ—Å—Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∑–Ω–∞—á–∏–º–æ–≥–æ —Ç–∏–ø–∞ –≤ –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞¬†`object`. 

**–†–∞—Å–ø–∞–∫–æ–≤–∫–∞** (`unboxing`) - –ø—Ä–æ—Ü–µ—Å—Å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∑–Ω–∞—á–∏–º–æ–≥–æ —Ç–∏–ø–∞ –∏–∑ –æ–±—ä–µ–∫—Ç–∞.

*–£–ø–∞–∫–æ–≤–∫–∞* —è–≤–ª—è–µ—Ç—Å—è **–Ω–µ—è–≤–Ω–æ–π** –æ–ø–µ—Ä–∞—Ü–∏–µ–π, —Ç.–µ. –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–∏—Å–∞—Ç—å `(object)`, —á—Ç–æ–±—ã –∑–Ω–∞—á–∏–º—ã–π —Ç–∏–ø –±—ã–ª –∑–∞–≤–µ—Ä–Ω—É—Ç –≤ –æ–±—ä–µ–∫—Ç –∏ —Ä–∞–∑–º–µ—â–µ–Ω –≤ –∫—É—á–µ. *–†–∞—Å–ø–∞–∫–æ–≤–∫–∞*, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç —É–ø–∞–∫–æ–≤–∫–∏, —è–≤–ª—è–µ—Ç—Å—è **—è–≤–Ω–æ–π** –æ–ø–µ—Ä–∞—Ü–∏–µ–π, –ø—Ä–∏ —á–µ–º, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å –≤ —Å–∫–æ–±–∫–∞—Ö —Ç–∏–ø, –≤ –∫–æ—Ç–æ—Ä–æ–π —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –±—É–¥–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å –æ—à–∏–±–∫—É

```csharp
int i = 123; 
object o = i; // boxing i
int z = (int)o; //unboxing o
```

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —á–∞—â–µ –≤—Å–µ–≥–æ `boxing/unboxing` –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª—É—á–∞—è—Ö:
- –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –≤ `value-—Ç–∏–ø–∞–º–∏`(—Å–º. –ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ)
- –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –≤ –º–µ—Ç–æ–¥ –∑–Ω–∞—á–∏–º—ã—Ö —Ç–∏–ø–æ–≤ –≤ `params object[]` 
- —Ä–∞–±–æ—Ç–∞ —Å –Ω–µ-–¥–∂–µ–Ω–µ—Ä–∏–∫ –≤–µ—Ä—Å–∏—è–º–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–π `ArrayList`, `Hashtable`, `Queue`, `Stack`

```csharp
List<IFormattable> formattables = new List<IFormattable>();
formattables.Add(42);      // Boxing: int ‚Üí IFormattable
formattables.Add(3.14159); // Boxing: double ‚Üí IFormattable
```

### üìë–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º –∫–ª–∞—Å—Å–æ–º?

|                                                            | `abstract class`                                                                               | `interface`                                                                              |
| ---------------------------------------------------------- | ---------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------- |
| –º–µ—Ç–æ–¥—ã –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é                          | –¥–∞                                                                                             | **–Ω–µ—Ç, –Ω–æ –Ω–∞—á–∏–Ω–∞—è —Å `c# 8.0` –º–æ–≥—É—Ç**                                                     |
| –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ                                 | –Ω–µ—Ç, –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω `abstract class`                                            | –¥–∞, –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤                                       |
| –∫–∞–∫–∏–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –¥–æ—Å—Ç—É–ø–∞ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —á–ª–µ–Ω–æ–≤ | –ª—é–±—ã–µ                                                                                          | —Ç–æ–ª—å–∫–æ `public`                                                                          |
| –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä                                    | –¥–∞                                                                                             | –Ω–µ—Ç                                                                                      |
| –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –ø–æ–ª—è                                           | –¥–∞                                                                                             | **–Ω–µ—Ç, –Ω–æ –Ω–∞—á–∏–Ω–∞—è —Å `c# 8.0` –º–æ–∂–µ—Ç**                                                     |
| –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å                                         | - –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –±–∞–∑–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏–ª–∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è | - –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ<br>- –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ |

## üìî–ö–æ–ª–ª–µ–∫—Ü–∏–∏

#priority/üî•high #üìëtheory/üß†cÔºÉ 

![[Pasted image 20250503125706.png]]
### üìë–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å IEnumerable?

–ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø–æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏. –ö–ª—é—á–µ–≤—ã–µ **–ø–ª—é—Å—ã**:
	- –º–æ–∂–Ω–æ –∏—Ç–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é —á–µ—Ä–µ–∑ `foreach/for`
	- –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `LINQ`
	- –º–æ–∂–Ω–æ –∞–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
	- –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

**–û—Å–Ω–æ–≤–Ω–æ–π –º–∏–Ω—É—Å** - —ç—Ç–æ —Ç–æ, —á—Ç–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã `IEnumerable` *–≤—Å–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ –ø–∞–º—è—Ç—å*. –î–∞–Ω–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é `IEnumerable` —Å –±–æ–ª—å—à–∏–º–∏ –Ω–∞–±–æ—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–∞–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ –ë–î.

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IEnumerable` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –º–µ—Ç–æ–¥ `IEnumerator GetEnumerator()`, –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ—Ö–æ–¥ –ø–æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.

–ï—Å—Ç—å –¥–∂–µ–Ω–µ—Ä–∏–∫ –≤–µ—Ä—Å–∏—è `IEnumerable<T>`.

–ú–∞—Å—Å–∏–≤—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–µ–∞–ª–∏–∑—É—é—Ç `IEnumerable<T>`.
<br/>

### üìë–ß–µ–º –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã IEnumerable –∏ IQueryable?

|                                                               | IEnumerable                                                                           | IQueryable                                                                                                                                                               |
| ------------------------------------------------------------- | ------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| –¥–µ—Ç–∞–ª–∏                                                        | - –º–µ—Ç–æ–¥—ã (Where, Select) ‚Äî **–≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ C#, –∞ –Ω–µ –≤ SQL**                           | - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π **–≤—ã—Ä–∞–∂–µ–Ω–∏–µ**, –∫–æ—Ç–æ—Ä–æ–µ **–ø–æ—Ç–æ–º —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç—Å—è –≤ SQL**<br>- –º–µ—Ç–æ–¥—ã (`Where`, `Select`) **–Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ .NET —Å—Ä–∞–∑—É**, –∞ **—Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ SQL-–∑–∞–ø—Ä–æ—Å** |
| –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –∏–º–µ–Ω                                 | `System.Collections`                                                                  | `System.Linq`                                                                                                                                                            |
| –≥–¥–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–∞–ø—Ä–æ—Å—ã                                       | **–≤ –ø–∞–º—è—Ç–∏** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –∏–¥–µ–∞–ª—å–Ω—ã–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏ | **–Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö**, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ                                                             |
| –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç [[–û—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ\|–æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ]] | ‚úÖ                                                                                     | ‚úÖ                                                                                                                                                                        |
| –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å                                            | –Ω–∏–∂–µ –∏–∑-–∑–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç—å                                                   | –≤—ã—à–µ, —Ç.–∫. –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ –Ω—É–∂–Ω–æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç—å                                                                                               |
| –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `LINQ`                                              | —Ç–æ–ª—å–∫–æ `LINQ to Objects`                                                              | `LINQ to SQL, LINQ to Entities` –∏ —Ç.–¥.                                                                                                                                   |
| –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å                                            | –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ –≤ –ø–∞–º—è—Ç—å –¥–∞–Ω–Ω—ã–º–∏                                        | –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö (–ë–î, `API`)                                                                                                                              |
>**–ö–ª—é—á–µ–≤–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å `IQueryable`** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –∑–∞–ø—Ä–æ—Å –≤ –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä—É—é –ø–æ–Ω–∏–º–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫–æ–π –∫–∞–∫ –ë–î –∏–ª–∏ –≤–µ–±-—Å–µ—Ä–≤–∏—Å. –ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –∑–∞–¥–µ–π—Å—Ç–≤—É–µ—Ç—Å—è –º–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏ —á–µ–º –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å `IEnumerable` –∏, –∫–∞–∫ —Å–ª–µ–¥—Å—Ç–≤–∏–µ, `IQueryable` –±–æ–ª–µ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–Ω

```csharp
// –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º IEnumerable
IEnumerable<Customer> customers = dbContext.Customers.ToList(); // –ó–∞–≥—Ä—É–∂–∞–µ—Ç –í–°–ï –∑–∞–ø–∏—Å–∏ –≤ –ø–∞–º—è—Ç—å
var filteredCustomers = customers.Where(c => c.Age > 30); // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏

// –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º IQueryable
IQueryable<Customer> customers = dbContext.Customers; // –ù–∏—á–µ–≥–æ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
var filteredCustomers = customers.Where(c => c.Age > 30); // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ SQL-–∑–∞–ø—Ä–æ—Å —Å WHERE Age > 30
// –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ filteredCustomers
```

### üìë–ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω Dictionary<TKey, TValue> –≤–Ω—É—Ç—Ä–∏? –ö–∞–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ –≤ Dictionary?

|                          | Dictionary\<Tkey, TValue>                                                                                                                                                     |
| ------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| —á—Ç–æ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º          | —Ö–µ—à-—Ç–∞–±–ª–∏—Ü–∞, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∫–ª—é—á –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–π —Ö–µ—à-–∫–æ–¥                                                                                                |
| —ç–ª–µ–º–µ–Ω—Ç—ã –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã   | **–Ω–µ—Ç**, –ø—Ä–∏—á–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é –ø–æ—Ä—è–¥–∫–∞ —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Å–ª–æ–≤–∞—Ä–µ                                                                 |
| –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ | **–Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–∞** (–ø—Ä–æ —Å–∞–º–∏ —ç–ª–µ–º–µ–Ω—Ç—ã —Ä–µ—á–∏ –Ω–µ –∏–¥–µ—Ç); –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ `Add()` –¥–≤–∞ —Ä–∞–∑–∞ —Å —Ç–µ–º –∂–µ —Å–∞–º—ã–º –∫–ª—é—á–æ–º –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –≤—ã–±—Ä–æ—Å—É –∏—Å–∫–ª—é—á–µ–Ω–∏—è `ArgumentException` |
| —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞          | - –ª—É—á—à–∏–π —Å–ª—É—á–∞–π: –û(1)<br>- —Ö—É–¥—à–∏–π —Å–ª—É—á–∞–π, –∫–æ–≥–¥–∞ –º–Ω–æ–≥–æ –∫–æ–ª–ª–∏–∑–∏–π: –û(n)                                                                                                          |
### üìë–ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω List –≤–Ω—É—Ç—Ä–∏? –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞?

|                               | List\<T>                                                                                                                                                                                                                                                                          |
| ----------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| —á—Ç–æ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º               | –º–∞—Å—Å–∏–≤, —Ä–∞–∑–º–µ—Ä –∫–æ—Ç–æ—Ä–æ–≥–æ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –±–æ–ª—å—à–∏–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø—Ä–µ–¥–µ–ª—å–Ω–æ–π –µ–º–∫–æ—Å—Ç–∏                                                                                                                                                                                       |
| –∫–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç | 1) –µ—Å–ª–∏ **–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ** –∏–¥–µ—Ç **–≤ –∫–æ–Ω–µ—Ü**, —Ç–æ–≥–¥–∞ **–±—ã—Å—Ç—Ä–æ**, —Ç.–∫. –≤ –∫–æ–Ω—Ü–µ –æ–±—ã—á–Ω–æ –µ—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ –º–µ—Å—Ç–∞<br>2) –µ—Å–ª–∏ –∏–¥–µ—Ç **–≤—Å—Ç–∞–≤–∫–∞** —ç–ª–µ–º–µ–Ω—Ç–∞ **–≤ —Å–µ—Ä–µ–¥–∏–Ω—É** –∏–ª–∏ –≤–æ–æ–±—â–µ **–≤ –Ω–∞—á–∞–ª–æ**, —Ç–æ **–º–µ–¥–ª–µ–Ω–Ω–æ**, —Ç.–∫. *–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–≤–∏–Ω—É—Ç—å –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã* –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏ –≤—Å—Ç–∞–≤–∫–∏ –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ |

–ß–∏—Ç–∞–π —Ç–∞–∫–∂–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ [[List]] –∏ [[–ö–æ–ª–ª–µ–∫—Ü–∏—è#–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏|–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏]]