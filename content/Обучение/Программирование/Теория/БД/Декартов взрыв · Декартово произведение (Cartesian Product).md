**–î–µ–∫–∞—Ä—Ç–æ–≤ –≤–∑—Ä—ã–≤** - —ç—Ç–æ —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ –ø—Ä–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü –±–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —É—Å–ª–æ–≤–∏—è JOIN –ø–æ–ª—É—á–∞–µ—Ç—Å—è **–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ** –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫ –∏–∑ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü.

### **–§–æ—Ä–º—É–ª–∞:**

```
–†–µ–∑—É–ª—å—Ç–∞—Ç = –°—Ç—Ä–æ–∫–∏_—Ç–∞–±–ª–∏—Ü—ã_1 √ó –°—Ç—Ä–æ–∫–∏_—Ç–∞–±–ª–∏—Ü—ã_2 √ó ... √ó –°—Ç—Ä–æ–∫–∏_—Ç–∞–±–ª–∏—Ü—ã_N
```

## **–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä:**

### **–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**

```sql
-- –¢–∞–±–ª–∏—Ü–∞ users (3 —Å—Ç—Ä–æ–∫–∏)
CREATE TABLE users (id INT, name VARCHAR(50));
INSERT INTO users VALUES 
(1, 'Alice'), (2, 'Bob'), (3, 'Charlie');

-- –¢–∞–±–ª–∏—Ü–∞ orders (4 —Å—Ç—Ä–æ–∫–∏)  
CREATE TABLE orders (id INT, product VARCHAR(50));
INSERT INTO orders VALUES 
(1, 'Laptop'), (2, 'Phone'), (3, 'Tablet'), (4, 'Mouse');
```

### **–î–µ–∫–∞—Ä—Ç–æ–≤ –≤–∑—Ä—ã–≤:**

```sql
-- ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –Ω–µ—Ç —É—Å–ª–æ–≤–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
SELECT u.name, o.product 
FROM users u, orders o;

-- –ò–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ:
SELECT u.name, o.product 
FROM users u CROSS JOIN orders o;
```

### **–†–µ–∑—É–ª—å—Ç–∞—Ç: 3 √ó 4 = 12 —Å—Ç—Ä–æ–∫!**

```
name     | product
---------|--------
Alice    | Laptop
Alice    | Phone  
Alice    | Tablet
Alice    | Mouse
Bob      | Laptop
Bob      | Phone
Bob      | Tablet  
Bob      | Mouse
Charlie  | Laptop
Charlie  | Phone
Charlie  | Tablet
Charlie  | Mouse
```

## **–ö–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã:**

### **–†–µ–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —Ç–∞–±–ª–∏—Ü:**

```sql
-- –¢–∞–±–ª–∏—Ü–∞ users: 10,000 —Å—Ç—Ä–æ–∫
-- –¢–∞–±–ª–∏—Ü–∞ orders: 100,000 —Å—Ç—Ä–æ–∫  
-- –¢–∞–±–ª–∏—Ü–∞ products: 5,000 —Å—Ç—Ä–æ–∫

-- –î–µ–∫–∞—Ä—Ç–æ–≤ –≤–∑—Ä—ã–≤:
SELECT * FROM users, orders, products;
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: 10,000 √ó 100,000 √ó 5,000 = 5,000,000,000,000 —Å—Ç—Ä–æ–∫!
-- –≠—Ç–æ 5 —Ç—Ä–∏–ª–ª–∏–æ–Ω–æ–≤ —Å—Ç—Ä–æ–∫! üí•
```

### **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

```sql
-- –ü–∞–º—è—Ç—å: ~200GB+ —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
-- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: —á–∞—Å—ã/–¥–Ω–∏  
-- –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä: 100% CPU
-- –ú–æ–∂–µ—Ç "–ø–æ–ª–æ–∂–∏—Ç—å" –≤—Å—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
```

## **–ü—Ä–∏—á–∏–Ω—ã –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è:**

### **1. –ó–∞–±—ã–ª–∏ —É—Å–ª–æ–≤–∏–µ JOIN:**

```sql
-- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
SELECT u.name, o.product_name
FROM users u, orders o;

-- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ  
SELECT u.name, o.product_name
FROM users u 
JOIN orders o ON u.id = o.user_id;
```

### **2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ JOIN:**

```sql
-- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - —É—Å–ª–æ–≤–∏–µ –Ω–µ —Å–≤—è–∑—ã–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã
SELECT u.name, o.product_name
FROM users u 
JOIN orders o ON u.age > 18;  -- –≠—Ç–æ –ù–ï —Å–≤—è–∑—å –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏!

-- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
SELECT u.name, o.product_name  
FROM users u
JOIN orders o ON u.id = o.user_id
WHERE u.age > 18;  -- –£—Å–ª–æ–≤–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤ WHERE
```

### **3. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –±–µ–∑ —Å–≤—è–∑–µ–π:**

```sql
-- ‚ùå –û–ø–∞—Å–Ω–æ - –∫–∞–∂–¥–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–∞
SELECT *
FROM table1 t1, table2 t2, table3 t3, table4 t4
WHERE t1.id = t2.foreign_id;  -- t3 –∏ t4 –Ω–µ —Å–≤—è–∑–∞–Ω—ã!

-- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–≤—è–∑–∞–Ω—ã
SELECT *  
FROM table1 t1
JOIN table2 t2 ON t1.id = t2.foreign_id
JOIN table3 t3 ON t2.id = t3.foreign_id  
JOIN table4 t4 ON t3.id = t4.foreign_id;
```

## **–ö–∞–∫ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –¥–µ–∫–∞—Ä—Ç–æ–≤ –≤–∑—Ä—ã–≤:**

### **1. –ê–Ω–∞–ª–∏–∑ –ø–ª–∞–Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

```sql
EXPLAIN (ANALYZE, BUFFERS) 
SELECT u.name, o.product 
FROM users u, orders o;

-- –í –ø–ª–∞–Ω–µ —É–≤–∏–¥–∏—Ç–µ:
-- Nested Loop (cost=... rows=12000000 ...)  ‚Üê –û–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫!
-- -> Seq Scan on users (cost=... rows=10000 ...)
-- -> Materialize (cost=... rows=1200 ...)
--    -> Seq Scan on orders (cost=... rows=1200 ...)
```

### **2. –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫:**

```sql
-- –û–∂–∏–¥–∞–ª–∏: 1000 —Å—Ç—Ä–æ–∫
-- –ü–æ–ª—É—á–∏–ª–∏: 50,000,000 —Å—Ç—Ä–æ–∫
-- = –í–µ—Ä–æ—è—Ç–Ω–æ –¥–µ–∫–∞—Ä—Ç–æ–≤ –≤–∑—Ä—ã–≤!
```

### **3. –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–æ—Å—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:**

```sql
-- –ü—Ä–æ—Å—Ç–æ–π SELECT —Ä–∞–±–æ—Ç–∞–µ—Ç –º–∏–Ω—É—Ç—ã –≤–º–µ—Å—Ç–æ —Å–µ–∫—É–Ω–¥
-- = –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö —Å—Ç—Ä–æ–∫
```

## **–ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –¥–µ–∫–∞—Ä—Ç–æ–≤ –≤–∑—Ä—ã–≤:**

### **1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —è–≤–Ω—ã–µ JOIN:**

```sql
-- ‚úÖ –•–æ—Ä–æ—à–æ - —è–≤–Ω–æ –≤–∏–¥–Ω—ã —Å–≤—è–∑–∏
SELECT u.name, o.product_name, p.category
FROM users u
JOIN orders o ON u.id = o.user_id  
JOIN products p ON o.product_id = p.id;

-- ‚ùå –ü–ª–æ—Ö–æ - –Ω–µ—è–≤–Ω—ã–µ —Å–≤—è–∑–∏, –ª–µ–≥–∫–æ –æ—à–∏–±–∏—Ç—å—Å—è
SELECT u.name, o.product_name, p.category  
FROM users u, orders o, products p
WHERE u.id = o.user_id AND o.product_id = p.id;
```

### **2. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

```sql
-- –ü–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º "—Ç—è–∂–µ–ª–æ–≥–æ" –∑–∞–ø—Ä–æ—Å–∞
EXPLAIN SELECT ... FROM multiple_tables ...;

-- –ò—â–∏—Ç–µ –≤ –ø–ª–∞–Ω–µ:
-- - –û–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ rows=...
-- - CROSS JOIN –∏–ª–∏ Nested Loop –±–µ–∑ —É—Å–ª–æ–≤–∏–π
```

### **3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ LIMIT –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:**

```sql
-- –ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
SELECT u.name, o.product
FROM users u, orders o  
LIMIT 10;  -- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≤—ã–≤–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

-- –ï—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–∏ 10 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫ = –¥–µ–∫–∞—Ä—Ç–æ–≤ –≤–∑—Ä—ã–≤!
```

### **4. –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫:**

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
WITH expected_rows AS (
    SELECT COUNT(*) as user_count FROM users
), actual_query AS (
    SELECT COUNT(*) as result_count
    FROM users u JOIN orders o ON u.id = o.user_id
)
SELECT 
    e.user_count,
    a.result_count,
    CASE WHEN a.result_count > e.user_count * 10 
         THEN 'POSSIBLE CARTESIAN PRODUCT!' 
         ELSE 'OK' 
    END as status
FROM expected_rows e, actual_query a;
```

## **–ö–æ–≥–¥–∞ –¥–µ–∫–∞—Ä—Ç–æ–≤ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –Ω—É–∂–Ω–æ:**

### **–ò–Ω–æ–≥–¥–∞ –¥–µ–∫–∞—Ä—Ç–æ–≤ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –¥–µ–ª–∞–µ—Ç—Å—è –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ:**

```sql
-- ‚úÖ –ù–∞–º–µ—Ä–µ–Ω–Ω–æ–µ –¥–µ–∫–∞—Ä—Ç–æ–≤–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
-- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π —Ä–∞–∑–º–µ—Ä–æ–≤ –∏ —Ü–≤–µ—Ç–æ–≤
SELECT s.size_name, c.color_name
FROM sizes s
CROSS JOIN colors c;

-- –†–µ–∑—É–ª—å—Ç–∞—Ç:
-- S, Red
-- S, Blue  
-- M, Red
-- M, Blue
-- L, Red
-- L, Blue
```

### **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**

```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
SELECT 
    d.date_val,
    u.user_type,
    ROW_NUMBER() OVER() as test_case_id
FROM (SELECT generate_series('2024-01-01'::date, '2024-01-31'::date, '1 day'::interval)::date as date_val) d
CROSS JOIN (VALUES ('premium'), ('basic'), ('trial')) u(user_type);
```

## **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ:**

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ PostgreSQL:**

```sql
-- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –¥–æ–ª–≥–∏—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
SET log_min_duration_statement = 1000;  -- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã > 1 —Å–µ–∫—É–Ω–¥—ã

-- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏  
SET work_mem = '256MB';  -- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≥–ª–æ—â–µ–Ω–∏–µ –≤—Å–µ–π –ø–∞–º—è—Ç–∏

-- –¢–∞–π–º–∞—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
SET statement_timeout = 30000;  -- –ú–∞–∫—Å–∏–º—É–º 30 —Å–µ–∫—É–Ω–¥
```

**–ò—Ç–æ–≥:** –î–µ–∫–∞—Ä—Ç–æ–≤ –≤–∑—Ä—ã–≤ - –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –æ–ø–∞—Å–Ω—ã—Ö –æ—à–∏–±–æ–∫ –≤ SQL, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç "–ø–æ–ª–æ–∂–∏—Ç—å" —Å–µ—Ä–≤–µ—Ä –ë–î. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–ª–∞–Ω—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —è–≤–Ω—ã–µ JOIN —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏ —Å–≤—è–∑—ã–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü.