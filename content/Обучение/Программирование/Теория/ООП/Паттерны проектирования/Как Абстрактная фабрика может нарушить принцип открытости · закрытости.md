**–ü–∞—Ç—Ç–µ—Ä–Ω "–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞"** –º–æ–∂–µ—Ç **–Ω–∞—Ä—É—à–∞—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏/–∑–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏ (OCP)**, –µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–µ–∞–∫–∫—É—Ä–∞—Ç–Ω–æ.

---

## üìú –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: –ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–∏–Ω—Ü–∏–ø OCP?

> **–ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –Ω–æ –∑–∞–∫—Ä—ã—Ç –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏.**

–¢–æ –µ—Å—Ç—å —Ç—ã –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å **–¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**, **–Ω–µ –º–µ–Ω—è—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥**.

---

## ‚ö†Ô∏è –ì–¥–µ "–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞" –º–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∏—Ç—å OCP

### –ü—Ä–µ–¥—Å—Ç–∞–≤—å: —É —Ç–µ–±—è –µ—Å—Ç—å —Ç–∞–∫–∞—è —Ñ–∞–±—Ä–∏–∫–∞

```csharp
public class NotificationFactory : INotificationFactory
{
    public INotificationSender CreateSender(string type)
    {
        return type switch
        {
            "Email" => new EmailNotificationSender(),
            "SMS" => new SmsNotificationSender(),
            _ => throw new ArgumentException("Unknown type")
        };
    }
}
```

### –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ —Ç—ã –∑–∞—Ö–æ—á–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–∞–Ω–∞–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, Push)?

–¢–µ–±–µ **–ø—Ä–∏–¥—ë—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å –º–µ—Ç–æ–¥** `CreateSender`, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë –æ–¥–∏–Ω `case`:

```csharp
"Push" => new PushNotificationSender()
```

üìâ –≠—Ç–æ –∏ –µ—Å—Ç—å **–Ω–∞—Ä—É—à–µ–Ω–∏–µ OCP**: —Ç—ã **–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—à—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–ª–∞—Å—Å**, –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É **–Ω–æ–≤—ã–º –∫–ª–∞—Å—Å–æ–º**, –Ω–µ —Ç—Ä–æ–≥–∞—è —Å—Ç–∞—Ä—ã–µ.

---

## ‚úÖ –ö–∞–∫ —Å–æ–±–ª—é—Å—Ç–∏ OCP –≤ "–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–π —Ñ–∞–±—Ä–∏–∫–µ"

–ß—Ç–æ–±—ã –Ω–µ –Ω–∞—Ä—É—à–∞—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º**, –∞ –Ω–µ `switch/case`. –ù–∞–ø—Ä–∏–º–µ—Ä:

### –í–º–µ—Å—Ç–æ:

```csharp
// –Ω–∞—Ä—É—à–∞–µ—Ç OCP
switch (type) {
  case "Email": return new EmailNotificationSender();
  ...
}
```

### –õ—É—á—à–µ:

–°–æ–∑–¥–∞–π **–Ω–æ–≤—ã–π –∫–ª–∞—Å—Å-—Ñ–∞–±—Ä–∏–∫—É** –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –µ–≥–æ:

```csharp
public class PushNotificationFactory : INotificationFactory
{
    public INotificationSender CreateSender() => new PushNotificationSender();
}
```

–ò–ª–∏ ‚Äî –≤ –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ ‚Äî **–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –≤—Å–µ —Ñ–∞–±—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ DI**, –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ç–∫–∏, –∏–ª–∏ –¥–∞–∂–µ `Dictionary<string, INotificationFactory>`.

---

## üí° –ò—Ç–æ–≥–æ

|–ü–æ–¥—Ö–æ–¥|OCP —Å–æ–±–ª—é–¥—ë–Ω?|–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π|
|---|---|---|
|`switch/case` –≤ –æ–¥–Ω–æ–π —Ñ–∞–±—Ä–∏–∫–µ|‚ùå –ù–µ—Ç|–∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –∫–∞–Ω–∞–ª ‚Üí –∏–∑–º–µ–Ω–µ–Ω–∏–µ|
|–æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã-—Ñ–∞–±—Ä–∏–∫–∏|‚úÖ –î–∞|—Ä–∞—Å—à–∏—Ä—è–µ—à—å ‚Äî –Ω–µ –ª–æ–º–∞–µ—à—å|
|DI —Å –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π|‚úÖ –î–∞|–≥–∏–±–∫–æ, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ|

---

–•–æ—á–µ—à—å, –ø–æ–∫–∞–∂—É, –∫–∞–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–±—Ä–∏–∫–∏ –≤ –≤–∏–¥–µ —Å–ª–æ–≤–∞—Ä—è –∏ –¥–æ—Å—Ç–∞–≤–∞—Ç—å –ø–æ –∏–º–µ–Ω–∏ —á–µ—Ä–µ–∑ DI ‚Äî –±–µ–∑ switch'–∞?