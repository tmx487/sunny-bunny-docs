## üìå –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

**Builder** (–°—Ç—Ä–æ–∏—Ç–µ–ª—å) ‚Äî –ø–æ—Ä–æ–∂–¥–∞—é—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω, –∫–æ—Ç–æ—Ä—ã–π **–æ—Ç–¥–µ–ª—è–µ—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –æ—Ç –µ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è**, –ø–æ–∑–≤–æ–ª—è—è —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–±—ä–µ–∫—Ç–∞ —Å –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–º –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è.

---

## üß± –ü—Ä–∏–º–µ—Ä: –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —É —Ç–µ–±—è –µ—Å—Ç—å –∫–ª–∞—Å—Å `Report`, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–µ—Å—è—Ç–∫–∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤:

```csharp
public class Report
{
    public string Title { get; set; }
    public string Author { get; set; }
    public List<string> Sections { get; set; }
    public bool IncludeCharts { get; set; }
    public DateTime CreatedAt { get; set; }
}
```

–°–æ–∑–¥–∞–≤–∞—Ç—å –µ–≥–æ —á–µ—Ä–µ–∑ –æ–±—ã—á–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä ‚Äî –Ω–µ—É–¥–æ–±–Ω–æ, –æ—Å–æ–±–µ–Ω–Ω–æ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –æ–ø—Ü–∏–π.

---

## ‚úÖ –°—Ç—Ä–æ–∏—Ç–µ–ª—å –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –ø–æ—ç—Ç–∞–ø–Ω–æ **–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞—Ç—å** –æ–±—ä–µ–∫—Ç
    
- **–æ–±–µ—Å–ø–µ—á–∏—Ç—å —á–∏—Ç–∞–µ–º–æ—Å—Ç—å** –∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å
    
- **—Ä–∞–∑–¥–µ–ª–∏—Ç—å** –ª–æ–≥–∏–∫—É –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –æ—Ç —Å–∞–º–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
    

---

## üß© –°–æ—Å—Ç–∞–≤ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ Builder

1. **Product (–ü—Ä–æ–¥—É–∫—Ç)** ‚Äî –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Å—Ç—Ä–æ–∏–º (`Report`)
    
2. **Builder (–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç—Ä–æ–∏—Ç–µ–ª—è)** ‚Äî –æ–ø–∏—Å—ã–≤–∞–µ—Ç —à–∞–≥–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è
    
3. **ConcreteBuilder (–†–µ–∞–ª–∏–∑–∞—Ü–∏—è)** ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Å–±–æ—Ä–∫–∞
    
4. **Director (–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)** ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Ä—è–¥–∫–æ–º —Å–±–æ—Ä–∫–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
    

---

## üßë‚Äçüíª –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞

```csharp
// 1. –ü—Ä–æ–¥—É–∫—Ç
public class Report
{
    public string Title { get; set; }
    public string Author { get; set; }
    public List<string> Sections { get; } = new();
    public bool IncludeCharts { get; set; }
}

// 2. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç—Ä–æ–∏—Ç–µ–ª—è
public interface IReportBuilder
{
    IReportBuilder SetTitle(string title);
    IReportBuilder SetAuthor(string author);
    IReportBuilder AddSection(string section);
    IReportBuilder IncludeCharts();
    Report Build();
}

// 3. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å—Ç—Ä–æ–∏—Ç–µ–ª—å
public class ReportBuilder : IReportBuilder
{
    private readonly Report _report = new();

    public IReportBuilder SetTitle(string title)
    {
        _report.Title = title;
        return this;
    }

    public IReportBuilder SetAuthor(string author)
    {
        _report.Author = author;
        return this;
    }

    public IReportBuilder AddSection(string section)
    {
        _report.Sections.Add(section);
        return this;
    }

    public IReportBuilder IncludeCharts()
    {
        _report.IncludeCharts = true;
        return this;
    }

    public Report Build() => _report;
}
```

---

### ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```csharp
var builder = new ReportBuilder();

Report report = builder
    .SetTitle("Q1 Sales Report")
    .SetAuthor("Alice")
    .AddSection("Overview")
    .AddSection("Data")
    .IncludeCharts()
    .Build();
```

---

## üè≠ –í —á—ë–º –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Ñ–∞–±—Ä–∏–∫–∏?

|–ü–∞—Ç—Ç–µ—Ä–Ω|–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å|
|---|---|
|**–§–∞–±—Ä–∏–∫–∞**|–ö–æ–≥–¥–∞ –≤–∞–∂–Ω–æ **—á—Ç–æ —Å–æ–∑–¥–∞—Ç—å** (—Ç–∏–ø –æ–±—ä–µ–∫—Ç–∞)|
|**–°—Ç—Ä–æ–∏—Ç–µ–ª—å**|–ö–æ–≥–¥–∞ –≤–∞–∂–Ω–æ **–∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å** (–º–Ω–æ–≥–æ —à–∞–≥–æ–≤, –æ–ø—Ü–∏–π)|

---

## üéØ –ü—Ä–æ–¥–∞–∫—à–Ω-–ø—Ä–∏–º–µ—Ä—ã

- üìÑ **PDF/Word –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏, —Å–µ–∫—Ü–∏—è–º–∏)
    
- üí¨ **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö SQL-–∑–∞–ø—Ä–æ—Å–æ–≤** (`SqlQueryBuilder`)
    
- üõ†Ô∏è **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤/–±–∏–±–ª–∏–æ—Ç–µ–∫**, –Ω–∞–ø—Ä–∏–º–µ—Ä:
    
    ```csharp
    var client = new HttpClientBuilder()
        .UseBaseUrl("https://api.example.com")
        .UseRetryPolicy(...)
        .UseAuthorization("token")
        .Build();
    ```
    

---

## ‚úÖ –ü–ª—é—Å—ã

- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
    
- –£–¥–æ–±–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å **—Å–ª–æ–∂–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã —Å –æ–ø—Ü–∏—è–º–∏**
    
- –ö–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è **—á–∏—Ç–∞–±–µ–ª—å–Ω—ã–º**
    
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å **–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** —à–∞–≥–∏ (—á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
    

---

## ‚ùå –ú–∏–Ω—É—Å—ã

- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–ª–∞—Å—Å–æ–≤
    
- –õ–µ–≥–∫–æ **–ø–µ—Ä–µ–∫–æ–º–ø–ª–∏—Ü–∏—Ä–æ–≤–∞—Ç—å** –ø—Ä–æ—Å—Ç—ã–µ —Å–ª—É—á–∞–∏
    
- –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –±–µ–∑ `Director` –ª–æ–≥–∏–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞—Å–∫–∏–¥–∞–Ω–∞ –ø–æ –∫–æ–¥—É
    

---

## üìê UML (–µ—Å–ª–∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ)

```
Director ‚îÄ‚îÄ> IBuilder ‚óÅ‚îÄ‚îÄ ReportBuilder ‚îÄ‚îÄ> Report
```

- `Director` –≤—ã–∑—ã–≤–∞–µ—Ç —à–∞–≥–∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—è
    
- `ReportBuilder` —Ä–µ–∞–ª–∏–∑—É–µ—Ç `IBuilder`
    
- –í –∫–æ–Ω—Ü–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `Build()` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Report`

# –ü–∞—Ç—Ç–µ—Ä–Ω Builder —Å fluent-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

–î–∞–≤–∞–π –ø–æ–∫–∞–∂—É, –∫–∞–∫ **–ø–∞—Ç—Ç–µ—Ä–Ω Builder —Å fluent-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–≤ ASP.NET Core –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ**, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ HTTP-–∫–ª–∏–µ–Ω—Ç–æ–≤, middleware –∏ –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

---

## üìò –ß—Ç–æ —Ç–∞–∫–æ–µ Fluent-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å?

Fluent-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ü–µ–ø–æ—á–µ–∫ –≤—ã–∑–æ–≤–æ–≤, –∫–æ–≥–¥–∞ –∫–∞–∂–¥—ã–π –º–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–∞–º –æ–±—ä–µ–∫—Ç (–æ–±—ã—á–Ω–æ `this`). –≠—Ç–æ –¥–∞—ë—Ç —É–¥–æ–±–Ω—ã–π, —á–∏—Ç–∞–µ–º—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:

```csharp
var obj = new Builder()
    .StepOne()
    .StepTwo()
    .Build();
```

---

## üßë‚Äçüíª –ü—Ä–∏–º–µ—Ä 1: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `HttpClient` —á–µ—Ä–µ–∑ Builder

```csharp
builder.Services.AddHttpClient("MyApiClient", client =>
{
    client.BaseAddress = new Uri("https://api.example.com");
    client.DefaultRequestHeaders.Add("Authorization", "Bearer token");
})
.SetHandlerLifetime(TimeSpan.FromMinutes(5))
.AddPolicyHandler(GetRetryPolicy());
```

–ó–¥–µ—Å—å `AddHttpClient` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–∏–ª–¥–µ—Ä, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —à–∞–≥–∏ –ø–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—é –∫–ª–∏–µ–Ω—Ç–∞.

---

## üßë‚Äçüíª –ü—Ä–∏–º–µ—Ä 2: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Swagger

```csharp
builder.Services.AddSwaggerGen(options =>
{
    options.SwaggerDoc("v1", new OpenApiInfo
    {
        Title = "My API",
        Version = "v1"
    });
    options.IncludeXmlComments("docs.xml");
});
```

---

## üßë‚Äçüíª –ü—Ä–∏–º–µ—Ä 3: Middleware Pipeline (–≤ `Program.cs`)

```csharp
app.UseRouting()
   .UseCors("AllowAll")
   .UseAuthentication()
   .UseAuthorization()
   .UseEndpoints(endpoints =>
   {
       endpoints.MapControllers();
   });
```

–ó–¥–µ—Å—å —Ü–µ–ø–æ—á–∫–∞ `.UseX()` –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ **—Ç–∏–ø–∏—á–Ω—ã–π fluent builder**, —Ö–æ—Ç—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —ç—Ç–æ –Ω–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π Builder-–ø–∞—Ç—Ç–µ—Ä–Ω, –Ω–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Ç–æ—Ç –∂–µ.

---

## üßë‚Äçüíª –ü—Ä–∏–º–µ—Ä 4: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `Options` —á–µ—Ä–µ–∑ Fluent Builder

```csharp
builder.Services.Configure<EmailOptions>(options =>
{
    options.SmtpServer = "smtp.example.com";
    options.Port = 587;
    options.UseSSL = true;
});
```

---

## üîß –ú–æ–∂–µ—à—å —Å–¥–µ–ª–∞—Ç—å —Å–≤–æ–π Builder

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Ç—ã —Å–æ–∑–¥–∞—ë—à—å –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫–ª–∏–µ–Ω—Ç:

```csharp
public class EmailClientBuilder
{
    private string _host;
    private int _port;
    private bool _useSsl;

    public EmailClientBuilder WithHost(string host)
    {
        _host = host;
        return this;
    }

    public EmailClientBuilder WithPort(int port)
    {
        _port = port;
        return this;
    }

    public EmailClientBuilder UseSsl()
    {
        _useSsl = true;
        return this;
    }

    public EmailClient Build()
    {
        return new EmailClient(_host, _port, _useSsl);
    }
}
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```csharp
var client = new EmailClientBuilder()
    .WithHost("smtp.example.com")
    .WithPort(587)
    .UseSsl()
    .Build();
```

---

## ‚úÖ –ü–æ—á–µ–º—É Builder —Ç–∞–∫ –ª—é–±—è—Ç –≤ .NET:

- Fluent API —É–¥–æ–±–Ω–æ —á–∏—Ç–∞—Ç—å –∏ –ø–∏—Å–∞—Ç—å
    
- –•–æ—Ä–æ—à–æ —Å–æ—á–µ—Ç–∞–µ—Ç—Å—è —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π DI, HttpClient, Entity Framework, Serilog –∏ –¥—Ä.
    
- –ü–æ–∑–≤–æ–ª—è–µ—Ç **–ø–æ—à–∞–≥–æ–≤–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å** —Å–ª–æ–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
    

---

–•–æ—á–µ—à—å ‚Äî –º–æ–≥—É –ø–æ–º–æ—á—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–≤–æ–π `Builder` –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, —Å–∫–∞–∂–µ–º, `NotificationService`, —á—Ç–æ–±—ã –ø–æ—à–∞–≥–æ–≤–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Ç.–ø.