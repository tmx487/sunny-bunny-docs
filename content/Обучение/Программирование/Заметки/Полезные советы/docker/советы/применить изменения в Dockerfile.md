Чтобы применить изменения в **Dockerfile** к уже существующему контейнеру, нужно выполнить следующие шаги:

---

### 1. **Пересобрать образ**

Образ контейнера зависит от **Dockerfile**, поэтому изменения нужно применить сначала к образу. Выполните команду:

```bash
docker build -t <image-name>:<tag> .
```

- `<image-name>` — имя вашего образа.
- `<tag>` — опционально, версия вашего образа (например, `latest`, `v1.1` и т.д.).

---

### 2. **Остановить и удалить старый контейнер**

Прежде чем запустить новый контейнер, необходимо остановить и удалить старый:

```bash
docker stop <container-name>
docker rm <container-name>
```

Где `<container-name>` — это имя работающего контейнера.

---

### 3. **Запустить новый контейнер на основе обновленного образа**

Запустите контейнер, используя обновленный образ:

```bash
docker run --name <new-container-name> -d -p <host-port>:<container-port> <image-name>:<tag>
```

- `<new-container-name>` — имя нового контейнера.
- `<host-port>` — порт на вашей машине, с которого будет доступен контейнер.
- `<container-port>` — порт внутри контейнера, который должен быть открыт.

---

### 4. **Если используете Docker Compose**

Если ваш проект работает через `docker-compose`, выполните следующие шаги:

#### a. Пересобрать сервисы

В папке, где расположен файл `docker-compose.yml`, выполните команду:

```bash
docker-compose up --build
```

Эта команда:

1. Пересоберет образы для всех сервисов, описанных в `docker-compose.yml`.
2. Перезапустит контейнеры с новыми образами.

#### b. Если хотите пересобрать и перезапустить только один сервис:

Используйте:

```bash
docker-compose up --build <service-name>
```

Где `<service-name>` — имя сервиса из `docker-compose.yml`.

---

### 5. **Проверить изменения**

После перезапуска контейнера, убедитесь, что обновления применились, выполнив команды:

- **Посмотреть список запущенных контейнеров**:
    
    ```bash
    docker ps
    ```
    
- **Посмотреть логи нового контейнера**:
    
    ```bash
    docker logs <new-container-name>
    ```
    

---

### Важно:

Если данные контейнера сохраняются внутри, и вы хотите их сохранить, используйте **volumes** в `docker-compose.yml` или при запуске контейнера. Это обеспечит сохранение данных между перезапусками.