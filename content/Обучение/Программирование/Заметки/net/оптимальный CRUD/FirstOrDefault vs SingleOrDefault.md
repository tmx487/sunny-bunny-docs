
[[–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –°RUD –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö|üìÑ—Å–º. –∏—Å—Ö–æ–¥–Ω—ã–π –ø—Ä–∏–º–µ—Äüîó]]

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –º–µ—Ç–æ–¥–∞–º–∏ `FirstOrDefaultAsync()` –∏ `SingleOrDefaultAsync()` –≤ **Entity Framework Core** (–∏ –≤ LINQ –≤ —Ü–µ–ª–æ–º) –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, –∫–∞–∫ –æ–Ω–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∑–∞–ø—Ä–æ—Å—ã –∏ –∫–∞–∫–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –Ω–∞–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –Ω–∞ –¥–∞–Ω–Ω—ã–µ.

### –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É `FirstOrDefaultAsync()` –∏ `SingleOrDefaultAsync()`

1. **`FirstOrDefaultAsync()`**:
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç** –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–¥–∞–Ω–Ω–æ–º—É —É—Å–ª–æ–≤–∏—é.
   - –ï—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç –Ω–µ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—é, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **`null`** –¥–ª—è —Å—Å—ã–ª–æ—á–Ω–æ–≥–æ —Ç–∏–ø–∞ –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ç–∏–ø–æ–≤ –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `0` –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö —Ç–∏–ø–æ–≤).
   - **–ü–æ–∑–≤–æ–ª—è–µ—Ç** –Ω–∞–ª–∏—á–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–∏—Ö —É—Å–ª–æ–≤–∏—é. –¢.–µ. **–Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

2. **`SingleOrDefaultAsync()`**:
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç**, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–¥–∞–Ω–Ω–æ–º—É —É—Å–ª–æ–≤–∏—é.
   - –ï—Å–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **`null`** (–∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ç–∏–ø–æ–≤ –∑–Ω–∞—á–µ–Ω–∏—è).
   - –ï—Å–ª–∏ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ **–±–æ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞**, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–µ–≥–æ —É—Å–ª–æ–≤–∏—é, –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ **`InvalidOperationException`**. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–∏–π —É—Å–ª–æ–≤–∏—é.

---

### –ü–æ—á–µ–º—É —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `FirstOrDefaultAsync()`?

–í –º–µ—Ç–æ–¥–µ `GetByIdAsync(Guid id)` –º—ã –∏—â–µ–º –∫–æ–Ω—Ç–∞–∫—Ç –ø–æ –µ–≥–æ **—É–Ω–∏–∫–∞–ª—å–Ω–æ–º—É –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É (ID)**. –û–¥–Ω–∞–∫–æ —Å–ª–µ–¥—É–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –º–æ–º–µ–Ω—Ç—ã:

- **`Guid` —É–Ω–∏–∫–∞–ª–µ–Ω**: –ï—Å–ª–∏ ID –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —É–Ω–∏–∫–∞–ª–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, —Ç–æ –º–æ–∂–Ω–æ –æ–∂–∏–¥–∞—Ç—å, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –≤–µ—Ä–Ω–µ—Ç **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω** —ç–ª–µ–º–µ–Ω—Ç. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏–ª –±—ã –º–µ—Ç–æ–¥ `SingleOrDefaultAsync()`.
  
- **–ì–∏–±–∫–æ—Å—Ç—å `FirstOrDefaultAsync()`**: –î–∞–∂–µ –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ `Guid` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª–µ–Ω, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `FirstOrDefaultAsync()` –¥–∞–µ—Ç –Ω–∞–º –Ω–µ–∫–æ—Ç–æ—Ä—É—é –≥–∏–±–∫–æ—Å—Ç—å, –Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –ø–æ—è–≤—è—Ç—Å—è –¥—É–±–ª–∏–∫–∞—Ç—ã, –∏ –º—ã —Ö–æ—Ç–∏–º –ø—Ä–æ—Å—Ç–æ –≤–µ—Ä–Ω—É—Ç—å –ø–µ—Ä–≤—ã–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç, –∏–∑–±–µ–≥–∞—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è.

- **–°—Ü–µ–Ω–∞—Ä–∏–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**: –•–æ—Ç—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥—É–±–ª–∏–∫–∞—Ç–æ–≤, –º–æ–≥—É—Ç –±—ã—Ç—å —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º ID –æ–∫–∞–∂—É—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏ –∏–ª–∏ –ø–ª–æ—Ö–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö). –í —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `FirstOrDefaultAsync()` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç –≤—ã–±—Ä–æ—Å –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Å–ª—É—á–∞–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –¥–∞–Ω–Ω—ã—Ö.

---

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `SingleOrDefaultAsync()`?

–ï—Å–ª–∏ —Ç—ã —É–≤–µ—Ä–µ–Ω, —á—Ç–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç (—á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤), –∏ –≤ —Å–ª—É—á–∞–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–±–µ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –æ—à–∏–±–∫—É, —Ç–æ –º–µ—Ç–æ–¥ `SingleOrDefaultAsync()` –±—É–¥–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –≤—ã–±–æ—Ä–æ–º.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `SingleOrDefaultAsync()`:

```csharp
public async Task<Contact> GetByIdAsync(Guid id)
{
    return await _context.Contacts
        .SingleOrDefaultAsync(c => c.Id == id);
}
```

–≠—Ç–æ—Ç –∫–æ–¥ –≤—ã–±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –ø–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–º—É ID –Ω–∞–π–¥–µ–Ω–æ –±–æ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞, —á—Ç–æ, –≤ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö, –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å.

---

### –†–µ–∑—é–º–µ:

- **`FirstOrDefaultAsync()`** ‚Äî –ø–æ–¥—Ö–æ–¥—è—â–∏–π –≤—ã–±–æ—Ä, –µ—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –±—ã—Ç—å –±–æ–ª–µ–µ –≥–∏–±–∫–∏–º –∏ –∏–∑–±–µ–∂–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ —Å–ª—É—á–∞–µ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏ –¥–∞–Ω–Ω—ã—Ö).
- **`SingleOrDefaultAsync()`** ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä, –µ—Å–ª–∏ —Ç—ã —É–≤–µ—Ä–µ–Ω, —á—Ç–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ ID –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç, –∏ —Ç—ã —Ö–æ—á–µ—à—å –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ —ç—Ç–æ —É—Å–ª–æ–≤–∏–µ –Ω–∞—Ä—É—à–µ–Ω–æ.

–í —Ç–≤–æ–µ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª–µ `Id` —è–≤–ª—è–µ—Ç—Å—è **—É–Ω–∏–∫–∞–ª—å–Ω—ã–º** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö), —Ç–æ –º–æ–∂–Ω–æ —Å–º–µ–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `SingleOrDefaultAsync()`.