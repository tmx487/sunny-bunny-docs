## üéØ –°—Ü–µ–Ω–∞—Ä–∏–π: –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–æ–≥–æ CSV-—Ñ–∞–π–ª–∞ –∏ –ø–æ–¥—Å—á—ë—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —Ç—ã –ø–æ–ª—É—á–∏–ª **CSV-—Ñ–∞–π–ª —Å –º–∏–ª–ª–∏–æ–Ω–æ–º —Å—Ç—Ä–æ–∫**, –∏ —Ç–µ–±–µ –Ω—É–∂–Ω–æ:

- —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å —Å—Ç—Ä–æ–∫–∏,
    
- –∏–∑–≤–ª–µ—á—å –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ,
    
- –ø–æ—Å—á–∏—Ç–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—É–º–º—ã, —Å—Ä–µ–¥–Ω–∏–µ –∏ —Ç.–ø.).
    

–≠—Ç–∞ –∑–∞–¥–∞—á–∞ **CPU-bound** (–Ω–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä), –∏ **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å —Ç—É—Ç –Ω–µ –ø–æ–º–æ–∂–µ—Ç** ‚Äî –∑–∞—Ç–æ –ø–æ–º–æ–∂–µ—Ç **–º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å**.

---

## ‚úÖ –ü—Ä–∏–º–µ—Ä —Å `Parallel.ForEach`

```csharp
using System.Collections.Concurrent;
using System.IO;
using System.Threading.Tasks;

public class CsvProcessor
{
    public async Task ProcessLargeCsvAsync(string path)
    {
        var lines = await File.ReadAllLinesAsync(path); // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —á–∏—Ç–∞–µ–º —Ñ–∞–π–ª

        var results = new ConcurrentBag<decimal>(); // –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è

        // –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å—Ç—Ä–æ–∫–∏
        Parallel.ForEach(lines, line =>
        {
            var parts = line.Split(',');
            if (decimal.TryParse(parts[2], out decimal value))
            {
                // –¢—è–∂—ë–ª–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)
                var processed = Math.Sqrt((double)value); // CPU-bound
                results.Add((decimal)processed);
            }
        });

        Console.WriteLine($"–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {results.Count} –∑–∞–ø–∏—Å–µ–π");
        Console.WriteLine($"–°—É–º–º–∞: {results.Sum()}");
    }
}
```

---

## üí¨ –ü–æ—á–µ–º—É –∑–¥–µ—Å—å **–º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å**:

- `Parallel.ForEach` –∑–∞–ø—É—Å–∫–∞–µ—Ç **–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤**, –∏—Å–ø–æ–ª—å–∑—É—è **ThreadPool**, –∏ **—Ä–∞–∑–¥–µ–ª—è–µ—Ç —Ä–∞–±–æ—Ç—É** –º–µ–∂–¥—É —è–¥—Ä–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞.
    
- –≠—Ç–æ **—É—Å–∫–æ—Ä—è–µ—Ç** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–∞—Ö –¥–∞–Ω–Ω—ã—Ö.
    
- `ConcurrentBag` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ—Ç–æ–∫–æ–≤** –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
    

---

## üö´ –ü–æ—á–µ–º—É `async/await` –Ω–µ –ø–æ–º–æ–∂–µ—Ç –∑–¥–µ—Å—å

–ï—Å–ª–∏ –±—ã —Ç—ã –Ω–∞–ø–∏—Å–∞–ª–∞ `await Task.Run(() => ...)` –±–µ–∑ `Parallel.ForEach`, –∫–æ–¥ –≤—Å—ë —Ä–∞–≤–Ω–æ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –±—ã –Ω–∞ **–æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ**, –∞ –≤–µ—Å—å –º–∞—Å—Å–∏–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª—Å—è –±—ã **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ**, —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Ñ–æ–Ω–æ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞.

---

## üì¶ –ì–¥–µ –µ—â—ë —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å

|üíº –°—Ü–µ–Ω–∞—Ä–∏–π|–ò—Å–ø–æ–ª—å–∑—É–µ–º|
|---|---|
|–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ –ø–æ –∑–∞–∫–∞–∑–∞–º|`Parallel.ForEach` –ø–æ –∑–∞–∫–∞–∑–∞–º|
|–ú–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π|`Task.Run()` + `Parallel`|
|–í–∏–¥–µ–æ- –∏–ª–∏ –∞—É–¥–∏–æ–∫–æ–¥–µ–∫–∏|–ò—Å–ø–æ–ª—å–∑—É—é—Ç `ThreadPool`, SIMD|
|–ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î|–†–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏–µ –ø–æ —á–∞–Ω–∫–∞–º|
|–ê–ª–≥–æ—Ä–∏—Ç–º—ã (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –≥—Ä–∞—Ñ—ã, ML)|–ß–∏—Å—Ç—ã–π –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π –∫–æ–¥|
