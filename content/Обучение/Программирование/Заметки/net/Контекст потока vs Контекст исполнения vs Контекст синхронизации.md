## üß† 1. –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ—Ç–æ–∫–∞ (Thread Context)

–≠—Ç–æ –≤—Å—ë, —á—Ç–æ —Å–≤—è–∑–∞–Ω–æ **—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø–æ—Ç–æ–∫–æ–º** (thread):

- —Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤;
    
- —Ä–µ–≥–∏—Å—Ç—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞;
    
- –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ—Ç–æ–∫–∞ (`ThreadLocal`);
    
- –∫—É–ª—å—Ç—É—Ä–∞ (`Thread.CurrentCulture`);
    
- –ø–æ—Ç–æ–∫–æ–≤–∞—è –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–º—è –ø–æ—Ç–æ–∫–∞);
    
- `ExecutionContext` (–≤—Ö–æ–¥–∏—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ—Ç–æ–∫–∞).
    

üëâ –≠—Ç–æ **–Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π** –∏ **–≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç**, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Ç–æ–∫.

---

## ‚öôÔ∏è 2. –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è (Execution Context)

–≠—Ç–æ **—á–∞—Å—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ—Ç–æ–∫–∞**, –∫–æ—Ç–æ—Ä—É—é .NET –º–æ–∂–µ—Ç **—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏** –Ω–∞ –¥—Ä—É–≥–æ–π –ø–æ—Ç–æ–∫.

–°—é–¥–∞ –≤—Ö–æ–¥—è—Ç:

- `SecurityContext`
    
- `SynchronizationContext`
    
- `LogicalCallContext`
    
- `HttpContext` (–≤ ASP.NET)
    
- `AsyncLocal<T>` –∑–Ω–∞—á–µ–Ω–∏—è
    

–ö–æ–≥–¥–∞ —Ç—ã –≤—ã–∑—ã–≤–∞–µ—à—å `await`, .NET **–∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç `ExecutionContext`**, –∞ –ø–æ—Ç–æ–º –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –µ–≥–æ –ø—Ä–∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏.

> –≠—Ç–æ –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ "–Ω–µ –ø–æ—Ç–µ—Ä—è–ª–∏—Å—å" –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –¥—Ä—É–≥–æ–π –ø–æ—Ç–æ–∫.

---

## üîÑ 3. [[–û–±—É—á–µ–Ω–∏–µ/–ú–µ–Ω—Ç–æ—Ä—Å—Ç–≤–æ/OLD –ö–∞—Ä—Ç–æ—á–∫–∏/–ì–ª–æ—Å—Å–∞—Ä–∏–π#^274d2a|–ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (SynchronizationContext)]]

–≠—Ç–æ **–æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–ª–æ–π** (–∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è), –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç **—Ç–µ–º, –≥–¥–µ –∏ –∫–∞–∫ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –ø–æ—Å–ª–µ `await`**.

–ü—Ä–∏–º–µ—Ä—ã:

- –≤ **UI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (WPF/WinForms)** ‚Äî —ç—Ç–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç UI-–ø–æ—Ç–æ–∫–∞;
    
- –≤ **ASP.NET** ‚Äî —ç—Ç–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞;
    
- –≤ **–∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö/–±—ç–∫–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö** ‚Äî —á–∞—Å—Ç–æ `null`.
    

–ï—Å–ª–∏ `SynchronizationContext` –µ—Å—Ç—å, —Ç–æ –ø–æ—Å–ª–µ `await` –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—Å—è **–Ω–∞ —Ç–æ–º –∂–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ**. –≠—Ç–æ –≤–∞–∂–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –Ω–µ "–≤—ã–ª–µ—Ç–µ—Ç—å" —Å UI-–ø–æ—Ç–æ–∫–∞.

```csharp
await SomeTask(); // –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—Å—è –≤ —Ç–æ–º –∂–µ SynchronizationContext, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
```

–ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

```csharp
await SomeTask().ConfigureAwait(false); // –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—Å—è –Ω–∞ –ª—é–±–æ–º –ø–æ—Ç–æ–∫–µ
```

---

## üß© –ò—Ç–æ–≥–æ ‚Äî –≤ —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞?

|–¢–µ—Ä–º–∏–Ω|–≠—Ç–æ –ø—Ä–æ...|–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è|
|---|---|---|
|**–ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ—Ç–æ–∫–∞**|–í—Å—ë, —á—Ç–æ "–∂–∏–≤–µ—Ç" –Ω–∞ –ø–æ—Ç–æ–∫–µ|–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–º|
|**–ö–æ–Ω—Ç–µ–∫—Å—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è**|–î–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ .NET –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏|`async/await`, `Task`|
|**–ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**|–ì–¥–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å—Å—è –∫–æ–¥ –ø–æ—Å–ª–µ `await`|UI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, ASP.NET|