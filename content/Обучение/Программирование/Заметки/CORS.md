CORS (Cross-Origin Resource Sharing) — это механизм, который позволяет ограничивать или разрешать доступ к ресурсам веб-приложений, размещенных на одном домене (или сервере), из других доменов. Он позволяет браузерам запросить ресурсы с другого домена, отличного от того, с которого был загружен текущий веб-сайт.

### Основные моменты:

1. **Кросс-доменные запросы:**  
    Когда веб-страница, загруженная с одного домена (например, `example.com`), пытается получить данные с другого домена (например, `api.example2.com`), браузер по умолчанию блокирует такие запросы, чтобы защитить пользователя от атак типа **CSRF (Cross-Site Request Forgery)** или **XSS (Cross-Site Scripting)**.
    
2. **Заголовки CORS:**  
    Чтобы разрешить такие кросс-доменные запросы, сервер, на который отправляется запрос, должен включить в ответ специальные заголовки. Эти заголовки сообщают браузеру, что ресурс может быть доступен для других доменов. Например:
    
    - **`Access-Control-Allow-Origin`**: указывает, какие домены могут обращаться к ресурсу. Например:
        
        ```http
        Access-Control-Allow-Origin: *
        ```
        
        Это означает, что к ресурсу могут обращаться все домены (небезопасно для некоторых случаев).
        
        Или:
        
        ```http
        Access-Control-Allow-Origin: https://example.com
        ```
        
        Это позволяет доступ только с домена `https://example.com`.
        
    - **`Access-Control-Allow-Methods`**: указывает, какие HTTP-методы разрешены для кросс-доменных запросов (например, `GET`, `POST`, `PATCH`, `DELETE`).
        
    - **`Access-Control-Allow-Headers`**: указывает, какие заголовки могут быть использованы при отправке запроса.
        
    - **`Access-Control-Allow-Credentials`**: указывает, разрешено ли отправлять учетные данные (например, cookies, заголовки авторизации) в запросах с другого домена.
        
3. **Процесс:**  
    Когда браузер делает кросс-доменный запрос (например, через JavaScript), он сначала отправляет **предварительный запрос** (preflight request) с методом `OPTIONS`, чтобы проверить, разрешен ли этот запрос на сервере. Если сервер возвращает соответствующие CORS-заголовки, браузер отправляет основной запрос.
    
4. **Пример:**
    
    Запрос с клиента:
    
    ```javascript
    fetch('https://api.example.com/data', {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json'
      }
    })
    .then(response => response.json())
    .then(data => console.log(data))
    .catch(error => console.log(error));
    ```
    
    Ответ от сервера:
    
    ```http
    HTTP/1.1 200 OK
    Access-Control-Allow-Origin: https://example.com
    Access-Control-Allow-Methods: GET, POST
    Access-Control-Allow-Headers: Content-Type
    Content-Type: application/json
    ```
    
5. **Безопасность:**  
    CORS — это важный механизм безопасности, который позволяет серверу контролировать, кто может обращаться к его ресурсам, предотвращая вредоносные запросы с несанкционированных источников.
    

### Зачем это нужно?

CORS решает проблему, когда ваш фронтенд (например, JavaScript на странице) пытается запросить ресурсы с другого домена, который может быть заблокирован по умолчанию браузером. Это важно для безопасного взаимодействия между клиентом и сервером в распределенных приложениях, таких как веб-приложения, использующие сторонние API.