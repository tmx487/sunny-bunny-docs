```yaml
version: '3.9'

services:
  contacts-api:
    build:
      context: .
      dockerfile: Contacts.API/Dockerfile
    ports:
      - "8080:8080"
    environment:
      ConnectionStrings__DefaultConnection: "Host=<EXISTING_DB_CONTAINER_NAME>;Port=5432;Database=phonebook_db;Username=your_username;Password=your_password"
    depends_on:
      - migrate

  migrate:
    build:
      context: .
      dockerfile: Contacts.API/Dockerfile
      target: migration
    environment:
      ConnectionStrings__DefaultConnection: "Host=<EXISTING_DB_CONTAINER_NAME>;Port=5432;Database=phonebook_db;Username=your_username;Password=your_password"

networks:
  default:
    external:
      name: <EXISTING_NETWORK>
```