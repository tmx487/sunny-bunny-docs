Для создания бэкапа локальной версии PostgreSQL вне Docker можно также использовать `pg_dump` или `pg_dumpall`, запуская их непосредственно на хост-машине. Вот пошаговая инструкция.

### 1. **Создание бэкапа одной базы данных с помощью `pg_dump`**

Если тебе нужен бэкап только одной базы данных, используй `pg_dump`:

```bash
pg_dump -U your_user -d your_database > backup.sql
```

#### Пояснение команды:
- `-U your_user` — имя пользователя PostgreSQL.
- `-d your_database` — название базы данных, которую ты хочешь сохранить.
- `> backup.sql` — указывает, что результат сохраняется в файл `backup.sql`.

После выполнения команды файл `backup.sql` будет создан в текущей директории.

### 2. **Создание бэкапа всех баз данных с помощью `pg_dumpall`**

Если нужно создать бэкап всех баз данных PostgreSQL, используй `pg_dumpall`. Этот инструмент сохраняет в файл все базы данных, роли и настройки.

```bash
pg_dumpall -U your_user > backup_all.sql
```

#### Пояснение команды:
- `-U your_user` — имя пользователя PostgreSQL.
- `> backup_all.sql` — файл, в который будет сохранен дамп всех баз.

### 3. **Автоматизация через cron (опционально)**

Если нужно делать бэкап регулярно, можно настроить **cron**. Например, чтобы бэкап выполнялся каждый день в 2:00 ночи, открой редактор cron:

```bash
crontab -e
```

Добавь строку для выполнения команды `pg_dump`:

```cron
0 2 * * * pg_dump -U your_user -d your_database > /path/to/backup/backup_$(date +\%Y\%m\%d).sql
```

### 4. **Восстановление из бэкапа**

Для восстановления базы данных из созданного бэкапа используй `psql`:

```bash
# Восстановление из бэкапа одной базы данных
psql -U your_user -d your_database < backup.sql

# Восстановление всех баз данных
psql -U your_user < backup_all.sql
```

### Подсказки для безопасности

- **Хранение пароля**: Если хочешь избежать ввода пароля при каждой операции, создай файл `.pgpass` в домашней директории пользователя с информацией о доступе. Например:

  ```plaintext
  localhost:5432:your_database:your_user:your_password
  ```

- **Защити файл бэкапа**: Ограничь доступ к файлам с дампом, чтобы защитить данные от несанкционированного доступа.